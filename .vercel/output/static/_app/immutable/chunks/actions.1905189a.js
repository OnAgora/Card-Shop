import{w as $o}from"./index.bb9a875c.js";import"./index.f800d987.js";let Po=null;const mi=e=>{Po=e},re=Object.freeze({debug:5,info:4,log:3,warn:2,error:1}),yi=e=>{let{title:t,message:n}=e;return[`
    %c${t}
    ============================

    ${n}

    ============================
    `.replace(/\n[^\S\r\n]+/g,`
`).trim(),,"font-weight:bold;font-family:monospace;"]},oe=async e=>{let{title:t,message:n,level:r,always:o=!1}=e;const s=await Po?.()?.get("logger.level")??re.warn;if(!o&&s<r)return;const u=yi({title:t,message:n});switch(r){case re.debug:console.debug(...u);break;case re.info:console.info(...u);break;case re.warn:console.warn(...u);break;case re.error:console.error(...u);break;default:console.log(...u)}};oe.deprecate=e=>{let{pkg:t,subject:n,transition:r,level:o=re.warn,message:s="",callback:u=null}=e;const c=f=>f.charAt(0).toUpperCase()+f.slice(1),p=()=>oe({title:`${t?t+" ":""}Deprecation Notice`,message:`
      ${n?`${c(n)} is deprecated and will cease to work in future releases${t?" of "+t:""}.`:""}${s?`
`+s:""}${r?`
You can learn more (including a guide on common transition paths) here: ${r}`:""}
    `.trim(),level:o});return typeof u=="function"?async function(){return await p(),await u(...arguments)}:p()};function v(e,t){if(!e){const s=new Error(`INVARIANT ${t}`);s.stack=s.stack.split(`
`).filter(u=>!/at invariant/.test(u)).join(`
`);for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];throw console.error(`

---

`,s,`

`,...r,`

---

`),s}}var Bo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let $r;var wi=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Bo):e=>($r||($r=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0));const Ei=Nn(wi),bi=()=>{const e=[];var t;return{async deliver(n){e.push(n),t&&(t(e.shift()),t=void 0)},receive(){return new Promise(function(r){const o=e.shift();if(o)return r(o);t=r})}}},yn="INIT",xt="SUBSCRIBE",St="UNSUBSCRIBE",Si="UPDATED",vi="EXIT",Pr="TERMINATE",U=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||typeof window=="object"&&window.window===window&&window;U.FCL_REGISTRY=U.FCL_REGISTRY==null?{}:U.FCL_REGISTRY;var Ri=0;const Ii=5e3,ie=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return new Promise((o,s)=>{const u=r.expectReply||!1,c=r.timeout!=null?r.timeout:Ii;u&&c&&setTimeout(()=>s(new Error(`Timeout: ${c}ms passed without a response.`)),c);const p={to:e,from:r.from,tag:t,data:n,timeout:c,reply:o,reject:s};try{U.FCL_REGISTRY[e]&&U.FCL_REGISTRY[e].mailbox.deliver(p),u||o(!0)}catch(f){console.error("FCL.Actor -- Could Not Deliver Message",p,U.FCL_REGISTRY[e],f)}})},Ai=e=>{delete U.FCL_REGISTRY[e]},Ci=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return async t=>{typeof e[yn]=="function"&&await e[yn](t);e:for(;;){const n=await t.receive();try{if(n.tag===vi){typeof e[Pr]=="function"&&await e[Pr](t,n,n.data||{});break e}await e[n.tag](t,n,n.data||{})}catch(r){console.error(`${t.self()} Error`,n,r)}finally{continue e}}}},Tt=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(t==null&&(t=++Ri),U.FCL_REGISTRY[t]!=null)return t;U.FCL_REGISTRY[t]={addr:t,mailbox:bi(),subs:new Set,kvs:{},error:null};const n={self:()=>t,receive:()=>U.FCL_REGISTRY[t].mailbox.receive(),send:function(r,o,s){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return u.from=t,ie(r,o,s,u)},sendSelf:(r,o,s)=>{U.FCL_REGISTRY[t]&&ie(t,r,o,s)},broadcast:function(r,o){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s.from=t;for(let u of U.FCL_REGISTRY[t].subs)ie(u,r,o,s)},subscribe:r=>r!=null&&U.FCL_REGISTRY[t].subs.add(r),unsubscribe:r=>r!=null&&U.FCL_REGISTRY[t].subs.delete(r),subscriberCount:()=>U.FCL_REGISTRY[t].subs.size,hasSubs:()=>!!U.FCL_REGISTRY[t].subs.size,put:(r,o)=>{r!=null&&(U.FCL_REGISTRY[t].kvs[r]=o)},get:(r,o)=>{const s=U.FCL_REGISTRY[t].kvs[r];return s??o},delete:r=>{delete U.FCL_REGISTRY[t].kvs[r]},update:(r,o)=>{r!=null&&(U.FCL_REGISTRY[t].kvs[r]=o(U.FCL_REGISTRY[t].kvs[r]))},keys:()=>Object.keys(U.FCL_REGISTRY[t].kvs),all:()=>U.FCL_REGISTRY[t].kvs,where:r=>Object.keys(U.FCL_REGISTRY[t].kvs).reduce((o,s)=>r.test(s)?{...o,[s]:U.FCL_REGISTRY[t].kvs[s]}:o,{}),merge:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(r).forEach(o=>U.FCL_REGISTRY[t].kvs[o]=r[o])},fatalError:r=>{U.FCL_REGISTRY[t].error=r;for(let o of U.FCL_REGISTRY[t].subs)ie(o,Si)}};return typeof e=="object"&&(e=Ci(e)),Ei(async()=>{await e(n),Ai(t)}),t};function Ti(e,t,n){t(e);const r="@EXIT",o=Tt(async s=>{for(s.send(e,xt);;){const u=await s.receive(),c=U.FCL_REGISTRY[e].error;if(u.tag===r){s.send(e,St);return}if(c){n(null,c),s.send(e,St);return}n(u.data,null)}});return()=>ie(o,r)}const Br=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((o,s)=>s(o),r)},ki=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((o,s)=>({...o,...s(r)}),{})},Ot=e=>e&&typeof e=="object"&&!Array.isArray(e),wn=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const o=n.shift();if(Ot(e)&&Ot(o))for(const s in o)Ot(o[s])?(e[s]||Object.assign(e,{[s]:{}}),wn(e[s],o[s])):Object.assign(e,{[s]:o[s]});return wn(e,...n)},$i=e=>Array.isArray(e)?wn({},...e):e,Pi=e=>e.contracts?e.contracts:{},Bi=e=>t=>Object.entries(t).reduce((n,r)=>{let[o,s]=r;const u=s?.aliases?.[e];return u&&(n[o]=u),n},{}),Fi=e=>t=>{let{deployments:n={},accounts:r={}}=t;const o=n?.[e];return o?Object.entries(o).reduce((s,u)=>{let[c,p]=u;const f=r[c]?.address;return f?p.reduce((h,g)=>({...h,[g]:f}),{}):s},{}):{}},Ni=(e,t)=>Br($i,ki(Fi(t),Br(Pi,Bi(t))))(e),_i=e=>typeof e!="string"?!1:/^[0-9A-Fa-f]+$/.test(e),Fr=e=>Object.entries(e?.accounts).reduce((t,n)=>{let[r,o]=n;return t?!0:o?.hasOwnProperty("key")&&_i(o?.key)},!1),Oi=e=>Ot(e)?Fr(e):e.some(Fr),Di=e=>e?.toLowerCase()==="local"?"emulator":e?.toLowerCase();mi(T);const Pe="config",Fo="PUT_CONFIG",No="GET_CONFIG",_o="GET_ALL_CONFIG",Oo="UPDATE_CONFIG",Do="DELETE_CONFIG",Lo="CLEAR_CONFIG",Uo="WHERE_CONFIG",mt="CONFIG/UPDATED",Go=e=>e,Mo={[Fo]:(e,t,n)=>{let{key:r,value:o}=n;if(r==null)throw new Error("Missing 'key' for config/put.");e.put(r,o),e.broadcast(mt,{...e.all()})},[No]:(e,t,n)=>{let{key:r,fallback:o}=n;if(r==null)throw new Error("Missing 'key' for config/get");t.reply(e.get(r,o))},[_o]:(e,t)=>{t.reply({...e.all()})},[Oo]:(e,t,n)=>{let{key:r,fn:o}=n;if(r==null)throw new Error("Missing 'key' for config/update");e.update(r,o||Go),e.broadcast(mt,{...e.all()})},[Do]:(e,t,n)=>{let{key:r}=n;if(r==null)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(mt,{...e.all()})},[Lo]:(e,t)=>{let n=Object.keys(e.all());for(let r of n)e.delete(r);e.broadcast(mt,{...e.all()})},[Uo]:(e,t,n)=>{let{pattern:r}=n;if(r==null)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(r))},[xt]:(e,t)=>{e.subscribe(t.from),e.send(t.from,mt,{...e.all()})},[St]:(e,t)=>{e.unsubscribe(t.from)}};Tt(Mo,Pe);function vt(e,t){return ie(Pe,Fo,{key:e,value:t}),T()}function ot(e,t){return ie(Pe,No,{key:e,fallback:t},{expectReply:!0,timeout:10})}async function _n(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return t;const[n,...r]=e,o=await ot(n);return o??_n(r,t)}function Mt(){return ie(Pe,_o,null,{expectReply:!0,timeout:10})}function qo(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Go;return ie(Pe,Oo,{key:e,fn:t}),T()}function jo(e){return ie(Pe,Do,{key:e}),T()}function Ho(e){return ie(Pe,Uo,{pattern:e},{expectReply:!0,timeout:10})}function zo(e){return Ti(Pe,()=>Tt(Mo,Pe),e)}function Li(){return ie(Pe,Lo)}function Nr(e){return Li().then(T(e))}async function Yo(e){const t=await ot("flow.network"),n=Di(t),{flowJSON:r}=e;if(v(!!r,"config.load -- 'flowJSON' must be defined"),v(n,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),Oi(r)){const o=n==="emulator";oe({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:o?re.warn:re.error}),v(o,"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security")}for(const[o,s]of Object.entries(Ni(r,n))){const u=`0x${o}`,c=await ot(u);c&&c!==s?oe({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:re.warn}):vt(u,s);const p=`system.contracts.${o}`,f=await ot(p);f&&f!==s?oe({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:re.warn}):vt(p,s)}}function T(e){return e!=null&&typeof e=="object"&&Object.keys(e).map(t=>vt(t,e[t])),{put:vt,get:ot,all:Mt,first:_n,update:qo,delete:jo,where:Ho,subscribe:zo,overload:Ko,load:Yo}}T.put=vt;T.get=ot;T.all=Mt;T.first=_n;T.update=qo;T.delete=jo;T.where=Ho;T.subscribe=zo;T.overload=Ko;T.load=Yo;const Ui=e=>e;function Ko(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ui;return new Promise(async(n,r)=>{const o=await Mt();try{T(e);var s=await t(await Mt());await Nr(o),n(s)}catch(u){await Nr(o),r(u)}})}var j={},Jt={};Jt.byteLength=qi;Jt.toByteArray=Hi;Jt.fromByteArray=Ki;var ke=[],we=[],Gi=typeof Uint8Array<"u"?Uint8Array:Array,un="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var xe=0,Mi=un.length;xe<Mi;++xe)ke[xe]=un[xe],we[un.charCodeAt(xe)]=xe;we["-".charCodeAt(0)]=62;we["_".charCodeAt(0)]=63;function Wo(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function qi(e){var t=Wo(e),n=t[0],r=t[1];return(n+r)*3/4-r}function ji(e,t,n){return(t+n)*3/4-n}function Hi(e){var t,n=Wo(e),r=n[0],o=n[1],s=new Gi(ji(e,r,o)),u=0,c=o>0?r-4:r,p;for(p=0;p<c;p+=4)t=we[e.charCodeAt(p)]<<18|we[e.charCodeAt(p+1)]<<12|we[e.charCodeAt(p+2)]<<6|we[e.charCodeAt(p+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=t&255;return o===2&&(t=we[e.charCodeAt(p)]<<2|we[e.charCodeAt(p+1)]>>4,s[u++]=t&255),o===1&&(t=we[e.charCodeAt(p)]<<10|we[e.charCodeAt(p+1)]<<4|we[e.charCodeAt(p+2)]>>2,s[u++]=t>>8&255,s[u++]=t&255),s}function zi(e){return ke[e>>18&63]+ke[e>>12&63]+ke[e>>6&63]+ke[e&63]}function Yi(e,t,n){for(var r,o=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),o.push(zi(r));return o.join("")}function Ki(e){for(var t,n=e.length,r=n%3,o=[],s=16383,u=0,c=n-r;u<c;u+=s)o.push(Yi(e,u,u+s>c?c:u+s));return r===1?(t=e[n-1],o.push(ke[t>>2]+ke[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],o.push(ke[t>>10]+ke[t>>4&63]+ke[t<<2&63]+"=")),o.join("")}var On={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */On.read=function(e,t,n,r,o){var s,u,c=o*8-r-1,p=(1<<c)-1,f=p>>1,h=-7,g=n?o-1:0,y=n?-1:1,b=e[t+g];for(g+=y,s=b&(1<<-h)-1,b>>=-h,h+=c;h>0;s=s*256+e[t+g],g+=y,h-=8);for(u=s&(1<<-h)-1,s>>=-h,h+=r;h>0;u=u*256+e[t+g],g+=y,h-=8);if(s===0)s=1-f;else{if(s===p)return u?NaN:(b?-1:1)*(1/0);u=u+Math.pow(2,r),s=s-f}return(b?-1:1)*u*Math.pow(2,s-r)};On.write=function(e,t,n,r,o,s){var u,c,p,f=s*8-o-1,h=(1<<f)-1,g=h>>1,y=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=r?0:s-1,I=r?1:-1,k=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,u=h):(u=Math.floor(Math.log(t)/Math.LN2),t*(p=Math.pow(2,-u))<1&&(u--,p*=2),u+g>=1?t+=y/p:t+=y*Math.pow(2,1-g),t*p>=2&&(u++,p/=2),u+g>=h?(c=0,u=h):u+g>=1?(c=(t*p-1)*Math.pow(2,o),u=u+g):(c=t*Math.pow(2,g-1)*Math.pow(2,o),u=0));o>=8;e[n+b]=c&255,b+=I,c/=256,o-=8);for(u=u<<o|c,f+=o;f>0;e[n+b]=u&255,b+=I,u/=256,f-=8);e[n+b-I]|=k*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Jt,n=On,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=F,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=s(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const l=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(l,a),l.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function u(l){if(l>o)throw new RangeError('The value "'+l+'" is invalid for option "size"');const a=new Uint8Array(l);return Object.setPrototypeOf(a,c.prototype),a}function c(l,a,i){if(typeof l=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(l)}return p(l,a,i)}c.poolSize=8192;function p(l,a,i){if(typeof l=="string")return y(l,a);if(ArrayBuffer.isView(l))return I(l);if(l==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(Ce(l,ArrayBuffer)||l&&Ce(l.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ce(l,SharedArrayBuffer)||l&&Ce(l.buffer,SharedArrayBuffer)))return k(l,a,i);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const d=l.valueOf&&l.valueOf();if(d!=null&&d!==l)return c.from(d,a,i);const m=$(l);if(m)return m;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return c.from(l[Symbol.toPrimitive]("string"),a,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}c.from=function(l,a,i){return p(l,a,i)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function f(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(l<0)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function h(l,a,i){return f(l),l<=0?u(l):a!==void 0?typeof i=="string"?u(l).fill(a,i):u(l).fill(a):u(l)}c.alloc=function(l,a,i){return h(l,a,i)};function g(l){return f(l),u(l<0?0:P(l)|0)}c.allocUnsafe=function(l){return g(l)},c.allocUnsafeSlow=function(l){return g(l)};function y(l,a){if((typeof a!="string"||a==="")&&(a="utf8"),!c.isEncoding(a))throw new TypeError("Unknown encoding: "+a);const i=A(l,a)|0;let d=u(i);const m=d.write(l,a);return m!==i&&(d=d.slice(0,m)),d}function b(l){const a=l.length<0?0:P(l.length)|0,i=u(a);for(let d=0;d<a;d+=1)i[d]=l[d]&255;return i}function I(l){if(Ce(l,Uint8Array)){const a=new Uint8Array(l);return k(a.buffer,a.byteOffset,a.byteLength)}return b(l)}function k(l,a,i){if(a<0||l.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<a+(i||0))throw new RangeError('"length" is outside of buffer bounds');let d;return a===void 0&&i===void 0?d=new Uint8Array(l):i===void 0?d=new Uint8Array(l,a):d=new Uint8Array(l,a,i),Object.setPrototypeOf(d,c.prototype),d}function $(l){if(c.isBuffer(l)){const a=P(l.length)|0,i=u(a);return i.length===0||l.copy(i,0,0,a),i}if(l.length!==void 0)return typeof l.length!="number"||sn(l.length)?u(0):b(l);if(l.type==="Buffer"&&Array.isArray(l.data))return b(l.data)}function P(l){if(l>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return l|0}function F(l){return+l!=l&&(l=0),c.alloc(+l)}c.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==c.prototype},c.compare=function(a,i){if(Ce(a,Uint8Array)&&(a=c.from(a,a.offset,a.byteLength)),Ce(i,Uint8Array)&&(i=c.from(i,i.offset,i.byteLength)),!c.isBuffer(a)||!c.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===i)return 0;let d=a.length,m=i.length;for(let w=0,S=Math.min(d,m);w<S;++w)if(a[w]!==i[w]){d=a[w],m=i[w];break}return d<m?-1:m<d?1:0},c.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(a,i){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return c.alloc(0);let d;if(i===void 0)for(i=0,d=0;d<a.length;++d)i+=a[d].length;const m=c.allocUnsafe(i);let w=0;for(d=0;d<a.length;++d){let S=a[d];if(Ce(S,Uint8Array))w+S.length>m.length?(c.isBuffer(S)||(S=c.from(S)),S.copy(m,w)):Uint8Array.prototype.set.call(m,S,w);else if(c.isBuffer(S))S.copy(m,w);else throw new TypeError('"list" argument must be an Array of Buffers');w+=S.length}return m};function A(l,a){if(c.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||Ce(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);const i=l.length,d=arguments.length>2&&arguments[2]===!0;if(!d&&i===0)return 0;let m=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return an(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return kr(l).length;default:if(m)return d?-1:an(l).length;a=(""+a).toLowerCase(),m=!0}}c.byteLength=A;function B(l,a,i){let d=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,a>>>=0,i<=a))return"";for(l||(l="utf8");;)switch(l){case"hex":return L(this,a,i);case"utf8":case"utf-8":return E(this,a,i);case"ascii":return te(this,a,i);case"latin1":case"binary":return Z(this,a,i);case"base64":return gt(this,a,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ke(this,a,i);default:if(d)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),d=!0}}c.prototype._isBuffer=!0;function C(l,a,i){const d=l[a];l[a]=l[i],l[i]=d}c.prototype.swap16=function(){const a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<a;i+=2)C(this,i,i+1);return this},c.prototype.swap32=function(){const a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<a;i+=4)C(this,i,i+3),C(this,i+1,i+2);return this},c.prototype.swap64=function(){const a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<a;i+=8)C(this,i,i+7),C(this,i+1,i+6),C(this,i+2,i+5),C(this,i+3,i+4);return this},c.prototype.toString=function(){const a=this.length;return a===0?"":arguments.length===0?E(this,0,a):B.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(a){if(!c.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:c.compare(this,a)===0},c.prototype.inspect=function(){let a="";const i=e.INSPECT_MAX_BYTES;return a=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(a+=" ... "),"<Buffer "+a+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(a,i,d,m,w){if(Ce(a,Uint8Array)&&(a=c.from(a,a.offset,a.byteLength)),!c.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(i===void 0&&(i=0),d===void 0&&(d=a?a.length:0),m===void 0&&(m=0),w===void 0&&(w=this.length),i<0||d>a.length||m<0||w>this.length)throw new RangeError("out of range index");if(m>=w&&i>=d)return 0;if(m>=w)return-1;if(i>=d)return 1;if(i>>>=0,d>>>=0,m>>>=0,w>>>=0,this===a)return 0;let S=w-m,O=d-i;const W=Math.min(S,O),Y=this.slice(m,w),V=a.slice(i,d);for(let q=0;q<W;++q)if(Y[q]!==V[q]){S=Y[q],O=V[q];break}return S<O?-1:O<S?1:0};function fe(l,a,i,d,m){if(l.length===0)return-1;if(typeof i=="string"?(d=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,sn(i)&&(i=m?0:l.length-1),i<0&&(i=l.length+i),i>=l.length){if(m)return-1;i=l.length-1}else if(i<0)if(m)i=0;else return-1;if(typeof a=="string"&&(a=c.from(a,d)),c.isBuffer(a))return a.length===0?-1:pe(l,a,i,d,m);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?m?Uint8Array.prototype.indexOf.call(l,a,i):Uint8Array.prototype.lastIndexOf.call(l,a,i):pe(l,[a],i,d,m);throw new TypeError("val must be string, number or Buffer")}function pe(l,a,i,d,m){let w=1,S=l.length,O=a.length;if(d!==void 0&&(d=String(d).toLowerCase(),d==="ucs2"||d==="ucs-2"||d==="utf16le"||d==="utf-16le")){if(l.length<2||a.length<2)return-1;w=2,S/=2,O/=2,i/=2}function W(V,q){return w===1?V[q]:V.readUInt16BE(q*w)}let Y;if(m){let V=-1;for(Y=i;Y<S;Y++)if(W(l,Y)===W(a,V===-1?0:Y-V)){if(V===-1&&(V=Y),Y-V+1===O)return V*w}else V!==-1&&(Y-=Y-V),V=-1}else for(i+O>S&&(i=S-O),Y=i;Y>=0;Y--){let V=!0;for(let q=0;q<O;q++)if(W(l,Y+q)!==W(a,q)){V=!1;break}if(V)return Y}return-1}c.prototype.includes=function(a,i,d){return this.indexOf(a,i,d)!==-1},c.prototype.indexOf=function(a,i,d){return fe(this,a,i,d,!0)},c.prototype.lastIndexOf=function(a,i,d){return fe(this,a,i,d,!1)};function _e(l,a,i,d){i=Number(i)||0;const m=l.length-i;d?(d=Number(d),d>m&&(d=m)):d=m;const w=a.length;d>w/2&&(d=w/2);let S;for(S=0;S<d;++S){const O=parseInt(a.substr(S*2,2),16);if(sn(O))return S;l[i+S]=O}return S}function tn(l,a,i,d){return Bt(an(a,l.length-i),l,i,d)}function nn(l,a,i,d){return Bt(fi(a),l,i,d)}function me(l,a,i,d){return Bt(kr(a),l,i,d)}function rn(l,a,i,d){return Bt(pi(a,l.length-i),l,i,d)}c.prototype.write=function(a,i,d,m){if(i===void 0)m="utf8",d=this.length,i=0;else if(d===void 0&&typeof i=="string")m=i,d=this.length,i=0;else if(isFinite(i))i=i>>>0,isFinite(d)?(d=d>>>0,m===void 0&&(m="utf8")):(m=d,d=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const w=this.length-i;if((d===void 0||d>w)&&(d=w),a.length>0&&(d<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");m||(m="utf8");let S=!1;for(;;)switch(m){case"hex":return _e(this,a,i,d);case"utf8":case"utf-8":return tn(this,a,i,d);case"ascii":case"latin1":case"binary":return nn(this,a,i,d);case"base64":return me(this,a,i,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rn(this,a,i,d);default:if(S)throw new TypeError("Unknown encoding: "+m);m=(""+m).toLowerCase(),S=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function gt(l,a,i){return a===0&&i===l.length?t.fromByteArray(l):t.fromByteArray(l.slice(a,i))}function E(l,a,i){i=Math.min(l.length,i);const d=[];let m=a;for(;m<i;){const w=l[m];let S=null,O=w>239?4:w>223?3:w>191?2:1;if(m+O<=i){let W,Y,V,q;switch(O){case 1:w<128&&(S=w);break;case 2:W=l[m+1],(W&192)===128&&(q=(w&31)<<6|W&63,q>127&&(S=q));break;case 3:W=l[m+1],Y=l[m+2],(W&192)===128&&(Y&192)===128&&(q=(w&15)<<12|(W&63)<<6|Y&63,q>2047&&(q<55296||q>57343)&&(S=q));break;case 4:W=l[m+1],Y=l[m+2],V=l[m+3],(W&192)===128&&(Y&192)===128&&(V&192)===128&&(q=(w&15)<<18|(W&63)<<12|(Y&63)<<6|V&63,q>65535&&q<1114112&&(S=q))}}S===null?(S=65533,O=1):S>65535&&(S-=65536,d.push(S>>>10&1023|55296),S=56320|S&1023),d.push(S),m+=O}return N(d)}const R=4096;function N(l){const a=l.length;if(a<=R)return String.fromCharCode.apply(String,l);let i="",d=0;for(;d<a;)i+=String.fromCharCode.apply(String,l.slice(d,d+=R));return i}function te(l,a,i){let d="";i=Math.min(l.length,i);for(let m=a;m<i;++m)d+=String.fromCharCode(l[m]&127);return d}function Z(l,a,i){let d="";i=Math.min(l.length,i);for(let m=a;m<i;++m)d+=String.fromCharCode(l[m]);return d}function L(l,a,i){const d=l.length;(!a||a<0)&&(a=0),(!i||i<0||i>d)&&(i=d);let m="";for(let w=a;w<i;++w)m+=gi[l[w]];return m}function Ke(l,a,i){const d=l.slice(a,i);let m="";for(let w=0;w<d.length-1;w+=2)m+=String.fromCharCode(d[w]+d[w+1]*256);return m}c.prototype.slice=function(a,i){const d=this.length;a=~~a,i=i===void 0?d:~~i,a<0?(a+=d,a<0&&(a=0)):a>d&&(a=d),i<0?(i+=d,i<0&&(i=0)):i>d&&(i=d),i<a&&(i=a);const m=this.subarray(a,i);return Object.setPrototypeOf(m,c.prototype),m};function z(l,a,i){if(l%1!==0||l<0)throw new RangeError("offset is not uint");if(l+a>i)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(a,i,d){a=a>>>0,i=i>>>0,d||z(a,i,this.length);let m=this[a],w=1,S=0;for(;++S<i&&(w*=256);)m+=this[a+S]*w;return m},c.prototype.readUintBE=c.prototype.readUIntBE=function(a,i,d){a=a>>>0,i=i>>>0,d||z(a,i,this.length);let m=this[a+--i],w=1;for(;i>0&&(w*=256);)m+=this[a+--i]*w;return m},c.prototype.readUint8=c.prototype.readUInt8=function(a,i){return a=a>>>0,i||z(a,1,this.length),this[a]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(a,i){return a=a>>>0,i||z(a,2,this.length),this[a]|this[a+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(a,i){return a=a>>>0,i||z(a,2,this.length),this[a]<<8|this[a+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(a,i){return a=a>>>0,i||z(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(a,i){return a=a>>>0,i||z(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},c.prototype.readBigUInt64LE=Le(function(a){a=a>>>0,Ve(a,"offset");const i=this[a],d=this[a+7];(i===void 0||d===void 0)&&ht(a,this.length-8);const m=i+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,w=this[++a]+this[++a]*2**8+this[++a]*2**16+d*2**24;return BigInt(m)+(BigInt(w)<<BigInt(32))}),c.prototype.readBigUInt64BE=Le(function(a){a=a>>>0,Ve(a,"offset");const i=this[a],d=this[a+7];(i===void 0||d===void 0)&&ht(a,this.length-8);const m=i*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],w=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+d;return(BigInt(m)<<BigInt(32))+BigInt(w)}),c.prototype.readIntLE=function(a,i,d){a=a>>>0,i=i>>>0,d||z(a,i,this.length);let m=this[a],w=1,S=0;for(;++S<i&&(w*=256);)m+=this[a+S]*w;return w*=128,m>=w&&(m-=Math.pow(2,8*i)),m},c.prototype.readIntBE=function(a,i,d){a=a>>>0,i=i>>>0,d||z(a,i,this.length);let m=i,w=1,S=this[a+--m];for(;m>0&&(w*=256);)S+=this[a+--m]*w;return w*=128,S>=w&&(S-=Math.pow(2,8*i)),S},c.prototype.readInt8=function(a,i){return a=a>>>0,i||z(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},c.prototype.readInt16LE=function(a,i){a=a>>>0,i||z(a,2,this.length);const d=this[a]|this[a+1]<<8;return d&32768?d|4294901760:d},c.prototype.readInt16BE=function(a,i){a=a>>>0,i||z(a,2,this.length);const d=this[a+1]|this[a]<<8;return d&32768?d|4294901760:d},c.prototype.readInt32LE=function(a,i){return a=a>>>0,i||z(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},c.prototype.readInt32BE=function(a,i){return a=a>>>0,i||z(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},c.prototype.readBigInt64LE=Le(function(a){a=a>>>0,Ve(a,"offset");const i=this[a],d=this[a+7];(i===void 0||d===void 0)&&ht(a,this.length-8);const m=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(d<<24);return(BigInt(m)<<BigInt(32))+BigInt(i+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24)}),c.prototype.readBigInt64BE=Le(function(a){a=a>>>0,Ve(a,"offset");const i=this[a],d=this[a+7];(i===void 0||d===void 0)&&ht(a,this.length-8);const m=(i<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(m)<<BigInt(32))+BigInt(this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+d)}),c.prototype.readFloatLE=function(a,i){return a=a>>>0,i||z(a,4,this.length),n.read(this,a,!0,23,4)},c.prototype.readFloatBE=function(a,i){return a=a>>>0,i||z(a,4,this.length),n.read(this,a,!1,23,4)},c.prototype.readDoubleLE=function(a,i){return a=a>>>0,i||z(a,8,this.length),n.read(this,a,!0,52,8)},c.prototype.readDoubleBE=function(a,i){return a=a>>>0,i||z(a,8,this.length),n.read(this,a,!1,52,8)};function ne(l,a,i,d,m,w){if(!c.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>m||a<w)throw new RangeError('"value" argument is out of bounds');if(i+d>l.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(a,i,d,m){if(a=+a,i=i>>>0,d=d>>>0,!m){const O=Math.pow(2,8*d)-1;ne(this,a,i,d,O,0)}let w=1,S=0;for(this[i]=a&255;++S<d&&(w*=256);)this[i+S]=a/w&255;return i+d},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(a,i,d,m){if(a=+a,i=i>>>0,d=d>>>0,!m){const O=Math.pow(2,8*d)-1;ne(this,a,i,d,O,0)}let w=d-1,S=1;for(this[i+w]=a&255;--w>=0&&(S*=256);)this[i+w]=a/S&255;return i+d},c.prototype.writeUint8=c.prototype.writeUInt8=function(a,i,d){return a=+a,i=i>>>0,d||ne(this,a,i,1,255,0),this[i]=a&255,i+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(a,i,d){return a=+a,i=i>>>0,d||ne(this,a,i,2,65535,0),this[i]=a&255,this[i+1]=a>>>8,i+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(a,i,d){return a=+a,i=i>>>0,d||ne(this,a,i,2,65535,0),this[i]=a>>>8,this[i+1]=a&255,i+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(a,i,d){return a=+a,i=i>>>0,d||ne(this,a,i,4,4294967295,0),this[i+3]=a>>>24,this[i+2]=a>>>16,this[i+1]=a>>>8,this[i]=a&255,i+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(a,i,d){return a=+a,i=i>>>0,d||ne(this,a,i,4,4294967295,0),this[i]=a>>>24,this[i+1]=a>>>16,this[i+2]=a>>>8,this[i+3]=a&255,i+4};function Sr(l,a,i,d,m){Tr(a,d,m,l,i,7);let w=Number(a&BigInt(4294967295));l[i++]=w,w=w>>8,l[i++]=w,w=w>>8,l[i++]=w,w=w>>8,l[i++]=w;let S=Number(a>>BigInt(32)&BigInt(4294967295));return l[i++]=S,S=S>>8,l[i++]=S,S=S>>8,l[i++]=S,S=S>>8,l[i++]=S,i}function vr(l,a,i,d,m){Tr(a,d,m,l,i,7);let w=Number(a&BigInt(4294967295));l[i+7]=w,w=w>>8,l[i+6]=w,w=w>>8,l[i+5]=w,w=w>>8,l[i+4]=w;let S=Number(a>>BigInt(32)&BigInt(4294967295));return l[i+3]=S,S=S>>8,l[i+2]=S,S=S>>8,l[i+1]=S,S=S>>8,l[i]=S,i+8}c.prototype.writeBigUInt64LE=Le(function(a,i=0){return Sr(this,a,i,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Le(function(a,i=0){return vr(this,a,i,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(a,i,d,m){if(a=+a,i=i>>>0,!m){const W=Math.pow(2,8*d-1);ne(this,a,i,d,W-1,-W)}let w=0,S=1,O=0;for(this[i]=a&255;++w<d&&(S*=256);)a<0&&O===0&&this[i+w-1]!==0&&(O=1),this[i+w]=(a/S>>0)-O&255;return i+d},c.prototype.writeIntBE=function(a,i,d,m){if(a=+a,i=i>>>0,!m){const W=Math.pow(2,8*d-1);ne(this,a,i,d,W-1,-W)}let w=d-1,S=1,O=0;for(this[i+w]=a&255;--w>=0&&(S*=256);)a<0&&O===0&&this[i+w+1]!==0&&(O=1),this[i+w]=(a/S>>0)-O&255;return i+d},c.prototype.writeInt8=function(a,i,d){return a=+a,i=i>>>0,d||ne(this,a,i,1,127,-128),a<0&&(a=255+a+1),this[i]=a&255,i+1},c.prototype.writeInt16LE=function(a,i,d){return a=+a,i=i>>>0,d||ne(this,a,i,2,32767,-32768),this[i]=a&255,this[i+1]=a>>>8,i+2},c.prototype.writeInt16BE=function(a,i,d){return a=+a,i=i>>>0,d||ne(this,a,i,2,32767,-32768),this[i]=a>>>8,this[i+1]=a&255,i+2},c.prototype.writeInt32LE=function(a,i,d){return a=+a,i=i>>>0,d||ne(this,a,i,4,2147483647,-2147483648),this[i]=a&255,this[i+1]=a>>>8,this[i+2]=a>>>16,this[i+3]=a>>>24,i+4},c.prototype.writeInt32BE=function(a,i,d){return a=+a,i=i>>>0,d||ne(this,a,i,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[i]=a>>>24,this[i+1]=a>>>16,this[i+2]=a>>>8,this[i+3]=a&255,i+4},c.prototype.writeBigInt64LE=Le(function(a,i=0){return Sr(this,a,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Le(function(a,i=0){return vr(this,a,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Rr(l,a,i,d,m,w){if(i+d>l.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function Ir(l,a,i,d,m){return a=+a,i=i>>>0,m||Rr(l,a,i,4),n.write(l,a,i,d,23,4),i+4}c.prototype.writeFloatLE=function(a,i,d){return Ir(this,a,i,!0,d)},c.prototype.writeFloatBE=function(a,i,d){return Ir(this,a,i,!1,d)};function Ar(l,a,i,d,m){return a=+a,i=i>>>0,m||Rr(l,a,i,8),n.write(l,a,i,d,52,8),i+8}c.prototype.writeDoubleLE=function(a,i,d){return Ar(this,a,i,!0,d)},c.prototype.writeDoubleBE=function(a,i,d){return Ar(this,a,i,!1,d)},c.prototype.copy=function(a,i,d,m){if(!c.isBuffer(a))throw new TypeError("argument should be a Buffer");if(d||(d=0),!m&&m!==0&&(m=this.length),i>=a.length&&(i=a.length),i||(i=0),m>0&&m<d&&(m=d),m===d||a.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("sourceEnd out of bounds");m>this.length&&(m=this.length),a.length-i<m-d&&(m=a.length-i+d);const w=m-d;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(i,d,m):Uint8Array.prototype.set.call(a,this.subarray(d,m),i),w},c.prototype.fill=function(a,i,d,m){if(typeof a=="string"){if(typeof i=="string"?(m=i,i=0,d=this.length):typeof d=="string"&&(m=d,d=this.length),m!==void 0&&typeof m!="string")throw new TypeError("encoding must be a string");if(typeof m=="string"&&!c.isEncoding(m))throw new TypeError("Unknown encoding: "+m);if(a.length===1){const S=a.charCodeAt(0);(m==="utf8"&&S<128||m==="latin1")&&(a=S)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(i<0||this.length<i||this.length<d)throw new RangeError("Out of range index");if(d<=i)return this;i=i>>>0,d=d===void 0?this.length:d>>>0,a||(a=0);let w;if(typeof a=="number")for(w=i;w<d;++w)this[w]=a;else{const S=c.isBuffer(a)?a:c.from(a,m),O=S.length;if(O===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(w=0;w<d-i;++w)this[w+i]=S[w%O]}return this};const We={};function on(l,a,i){We[l]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,this.stack,delete this.name}get code(){return l}set code(m){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:m,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}on("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),on("ERR_INVALID_ARG_TYPE",function(l,a){return`The "${l}" argument must be of type number. Received type ${typeof a}`},TypeError),on("ERR_OUT_OF_RANGE",function(l,a,i){let d=`The value of "${l}" is out of range.`,m=i;return Number.isInteger(i)&&Math.abs(i)>2**32?m=Cr(String(i)):typeof i=="bigint"&&(m=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(m=Cr(m)),m+="n"),d+=` It must be ${a}. Received ${m}`,d},RangeError);function Cr(l){let a="",i=l.length;const d=l[0]==="-"?1:0;for(;i>=d+4;i-=3)a=`_${l.slice(i-3,i)}${a}`;return`${l.slice(0,i)}${a}`}function ci(l,a,i){Ve(a,"offset"),(l[a]===void 0||l[a+i]===void 0)&&ht(a,l.length-(i+1))}function Tr(l,a,i,d,m,w){if(l>i||l<a){const S=typeof a=="bigint"?"n":"";let O;throw w>3?a===0||a===BigInt(0)?O=`>= 0${S} and < 2${S} ** ${(w+1)*8}${S}`:O=`>= -(2${S} ** ${(w+1)*8-1}${S}) and < 2 ** ${(w+1)*8-1}${S}`:O=`>= ${a}${S} and <= ${i}${S}`,new We.ERR_OUT_OF_RANGE("value",O,l)}ci(d,m,w)}function Ve(l,a){if(typeof l!="number")throw new We.ERR_INVALID_ARG_TYPE(a,"number",l)}function ht(l,a,i){throw Math.floor(l)!==l?(Ve(l,i),new We.ERR_OUT_OF_RANGE(i||"offset","an integer",l)):a<0?new We.ERR_BUFFER_OUT_OF_BOUNDS:new We.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${a}`,l)}const li=/[^+/0-9A-Za-z-_]/g;function di(l){if(l=l.split("=")[0],l=l.trim().replace(li,""),l.length<2)return"";for(;l.length%4!==0;)l=l+"=";return l}function an(l,a){a=a||1/0;let i;const d=l.length;let m=null;const w=[];for(let S=0;S<d;++S){if(i=l.charCodeAt(S),i>55295&&i<57344){if(!m){if(i>56319){(a-=3)>-1&&w.push(239,191,189);continue}else if(S+1===d){(a-=3)>-1&&w.push(239,191,189);continue}m=i;continue}if(i<56320){(a-=3)>-1&&w.push(239,191,189),m=i;continue}i=(m-55296<<10|i-56320)+65536}else m&&(a-=3)>-1&&w.push(239,191,189);if(m=null,i<128){if((a-=1)<0)break;w.push(i)}else if(i<2048){if((a-=2)<0)break;w.push(i>>6|192,i&63|128)}else if(i<65536){if((a-=3)<0)break;w.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((a-=4)<0)break;w.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return w}function fi(l){const a=[];for(let i=0;i<l.length;++i)a.push(l.charCodeAt(i)&255);return a}function pi(l,a){let i,d,m;const w=[];for(let S=0;S<l.length&&!((a-=2)<0);++S)i=l.charCodeAt(S),d=i>>8,m=i%256,w.push(m),w.push(d);return w}function kr(l){return t.toByteArray(di(l))}function Bt(l,a,i,d){let m;for(m=0;m<d&&!(m+i>=a.length||m>=l.length);++m)a[m+i]=l[m];return m}function Ce(l,a){return l instanceof a||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===a.name}function sn(l){return l!==l}const gi=function(){const l="0123456789abcdef",a=new Array(256);for(let i=0;i<16;++i){const d=i*16;for(let m=0;m<16;++m)a[d+m]=l[i]+l[m]}return a}();function Le(l){return typeof BigInt>"u"?hi:l}function hi(){throw new Error("BigInt not supported")}})(j);const Vo=Nn(j);function Dn(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++)t.push(Dn(e[n]));var r=j.Buffer.concat(t);return j.Buffer.concat([_r(r.length,192),r])}else{var o=Ji(e);return o.length===1&&o[0]<128?o:j.Buffer.concat([_r(o.length,128),o])}}function _r(e,t){if(e<56)return j.Buffer.from([e+t]);var n=En(e),r=n.length/2,o=En(t+55+r);return j.Buffer.from(o+n,"hex")}function xo(e){return e.slice(0,2)==="0x"}function Wi(e){return typeof e!="string"?e:xo(e)?e.slice(2):e}function En(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}function Vi(e){return e.length%2?"0"+e:e}function xi(e){var t=En(e);return j.Buffer.from(t,"hex")}function Ji(e){if(!j.Buffer.isBuffer(e)){if(typeof e=="string")return xo(e)?j.Buffer.from(Vi(Wi(e)),"hex"):j.Buffer.from(e);if(typeof e=="number")return e?xi(e):j.Buffer.from([]);if(e==null)return j.Buffer.from([]);if(e instanceof Uint8Array)return j.Buffer.from(e);throw new Error("invalid type")}return e}var bn={exports:{}};(function(e,t){var n=typeof self<"u"?self:Bo,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(u){var c={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function p(E){return E&&DataView.prototype.isPrototypeOf(E)}if(c.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(E){return E&&f.indexOf(Object.prototype.toString.call(E))>-1};function g(E){if(typeof E!="string"&&(E=String(E)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(E))throw new TypeError("Invalid character in header field name");return E.toLowerCase()}function y(E){return typeof E!="string"&&(E=String(E)),E}function b(E){var R={next:function(){var N=E.shift();return{done:N===void 0,value:N}}};return c.iterable&&(R[Symbol.iterator]=function(){return R}),R}function I(E){this.map={},E instanceof I?E.forEach(function(R,N){this.append(N,R)},this):Array.isArray(E)?E.forEach(function(R){this.append(R[0],R[1])},this):E&&Object.getOwnPropertyNames(E).forEach(function(R){this.append(R,E[R])},this)}I.prototype.append=function(E,R){E=g(E),R=y(R);var N=this.map[E];this.map[E]=N?N+", "+R:R},I.prototype.delete=function(E){delete this.map[g(E)]},I.prototype.get=function(E){return E=g(E),this.has(E)?this.map[E]:null},I.prototype.has=function(E){return this.map.hasOwnProperty(g(E))},I.prototype.set=function(E,R){this.map[g(E)]=y(R)},I.prototype.forEach=function(E,R){for(var N in this.map)this.map.hasOwnProperty(N)&&E.call(R,this.map[N],N,this)},I.prototype.keys=function(){var E=[];return this.forEach(function(R,N){E.push(N)}),b(E)},I.prototype.values=function(){var E=[];return this.forEach(function(R){E.push(R)}),b(E)},I.prototype.entries=function(){var E=[];return this.forEach(function(R,N){E.push([N,R])}),b(E)},c.iterable&&(I.prototype[Symbol.iterator]=I.prototype.entries);function k(E){if(E.bodyUsed)return Promise.reject(new TypeError("Already read"));E.bodyUsed=!0}function $(E){return new Promise(function(R,N){E.onload=function(){R(E.result)},E.onerror=function(){N(E.error)}})}function P(E){var R=new FileReader,N=$(R);return R.readAsArrayBuffer(E),N}function F(E){var R=new FileReader,N=$(R);return R.readAsText(E),N}function A(E){for(var R=new Uint8Array(E),N=new Array(R.length),te=0;te<R.length;te++)N[te]=String.fromCharCode(R[te]);return N.join("")}function B(E){if(E.slice)return E.slice(0);var R=new Uint8Array(E.byteLength);return R.set(new Uint8Array(E)),R.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(E){this._bodyInit=E,E?typeof E=="string"?this._bodyText=E:c.blob&&Blob.prototype.isPrototypeOf(E)?this._bodyBlob=E:c.formData&&FormData.prototype.isPrototypeOf(E)?this._bodyFormData=E:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)?this._bodyText=E.toString():c.arrayBuffer&&c.blob&&p(E)?(this._bodyArrayBuffer=B(E.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(E)||h(E))?this._bodyArrayBuffer=B(E):this._bodyText=E=Object.prototype.toString.call(E):this._bodyText="",this.headers.get("content-type")||(typeof E=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var E=k(this);if(E)return E;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?k(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(P)}),this.text=function(){var E=k(this);if(E)return E;if(this._bodyBlob)return F(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(tn)}),this.json=function(){return this.text().then(JSON.parse)},this}var fe=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function pe(E){var R=E.toUpperCase();return fe.indexOf(R)>-1?R:E}function _e(E,R){R=R||{};var N=R.body;if(E instanceof _e){if(E.bodyUsed)throw new TypeError("Already read");this.url=E.url,this.credentials=E.credentials,R.headers||(this.headers=new I(E.headers)),this.method=E.method,this.mode=E.mode,this.signal=E.signal,!N&&E._bodyInit!=null&&(N=E._bodyInit,E.bodyUsed=!0)}else this.url=String(E);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new I(R.headers)),this.method=pe(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&N)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(N)}_e.prototype.clone=function(){return new _e(this,{body:this._bodyInit})};function tn(E){var R=new FormData;return E.trim().split("&").forEach(function(N){if(N){var te=N.split("="),Z=te.shift().replace(/\+/g," "),L=te.join("=").replace(/\+/g," ");R.append(decodeURIComponent(Z),decodeURIComponent(L))}}),R}function nn(E){var R=new I,N=E.replace(/\r?\n[\t ]+/g," ");return N.split(/\r?\n/).forEach(function(te){var Z=te.split(":"),L=Z.shift().trim();if(L){var Ke=Z.join(":").trim();R.append(L,Ke)}}),R}C.call(_e.prototype);function me(E,R){R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in R?R.statusText:"OK",this.headers=new I(R.headers),this.url=R.url||"",this._initBody(E)}C.call(me.prototype),me.prototype.clone=function(){return new me(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new I(this.headers),url:this.url})},me.error=function(){var E=new me(null,{status:0,statusText:""});return E.type="error",E};var rn=[301,302,303,307,308];me.redirect=function(E,R){if(rn.indexOf(R)===-1)throw new RangeError("Invalid status code");return new me(null,{status:R,headers:{location:E}})},u.DOMException=s.DOMException;try{new u.DOMException}catch{u.DOMException=function(R,N){this.message=R,this.name=N;var te=Error(R);this.stack=te.stack},u.DOMException.prototype=Object.create(Error.prototype),u.DOMException.prototype.constructor=u.DOMException}function gt(E,R){return new Promise(function(N,te){var Z=new _e(E,R);if(Z.signal&&Z.signal.aborted)return te(new u.DOMException("Aborted","AbortError"));var L=new XMLHttpRequest;function Ke(){L.abort()}L.onload=function(){var z={status:L.status,statusText:L.statusText,headers:nn(L.getAllResponseHeaders()||"")};z.url="responseURL"in L?L.responseURL:z.headers.get("X-Request-URL");var ne="response"in L?L.response:L.responseText;N(new me(ne,z))},L.onerror=function(){te(new TypeError("Network request failed"))},L.ontimeout=function(){te(new TypeError("Network request failed"))},L.onabort=function(){te(new u.DOMException("Aborted","AbortError"))},L.open(Z.method,Z.url,!0),Z.credentials==="include"?L.withCredentials=!0:Z.credentials==="omit"&&(L.withCredentials=!1),"responseType"in L&&c.blob&&(L.responseType="blob"),Z.headers.forEach(function(z,ne){L.setRequestHeader(ne,z)}),Z.signal&&(Z.signal.addEventListener("abort",Ke),L.onreadystatechange=function(){L.readyState===4&&Z.signal.removeEventListener("abort",Ke)}),L.send(typeof Z._bodyInit>"u"?null:Z._bodyInit)})}return gt.polyfill=!0,s.fetch||(s.fetch=gt,s.Headers=I,s.Request=_e,s.Response=me),u.Headers=I,u.Request=_e,u.Response=me,u.fetch=gt,Object.defineProperty(u,"__esModule",{value:!0}),u})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=r;t=o.fetch,t.default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t})(bn,bn.exports);var Xi=bn.exports;const Jo=Nn(Xi);function J(e){return e==null?null:e.replace(/^0x/,"").replace(/^Fx/,"")}function ue(e){return e==null?null:"0x"+J(e)}const Zi=globalThis.AbortController||require("abort-controller");class cn extends Error{constructor(t){let{error:n,hostname:r,path:o,method:s,requestBody:u,responseBody:c,responseStatusText:p,statusCode:f}=t;const h=`
      HTTP Request Error: An error occurred when interacting with the Access API.
      ${n?`error=${n}`:""}
      ${r?`hostname=${r}`:""}
      ${o?`path=${o}`:""}
      ${s?`method=${s}`:""}
      ${u?`requestBody=${u}`:""}
      ${c?`responseBody=${c}`:""}
      ${p?`responseStatusText=${p}`:""}
      ${f?`statusCode=${f}`:""}
    `;super(h),this.name="HTTP Request Error",this.statusCode=f,this.errorMessage=n}}async function ee(e){let{hostname:t,path:n,method:r,body:o,headers:s,retryLimit:u=5,retryIntervalMs:c=1e3,timeoutLimit:p=3e4,enableRequestLogging:f=!0}=e;const h=o?JSON.stringify(o):null;function g(){const b=new Zi,I=setTimeout(()=>{b.abort()},p);return Jo(`${t}${n}`,{method:r,body:h,headers:s,signal:b.signal}).then(async k=>{if(k.ok)return k.json();const $=await k.text().catch(()=>null),P=Qi($);throw new cn({error:P?.message,hostname:t,path:n,method:r,requestBody:h,responseBody:$,responseStatusText:k.statusText,statusCode:k.status})}).catch(async k=>{throw k instanceof cn||k.name==="AbortError"?k:(f&&await oe({title:"Access Node Error",message:`The provided access node ${t} does not appear to be a valid REST/HTTP access node.
  Please verify that you are not unintentionally using a GRPC access node.
  See more here: https://docs.onflow.org/fcl/reference/sdk-guidelines/#connect`,level:re.error}),new cn({error:k?.message,hostname:t,path:n,method:r,requestBody:h}))}).finally(()=>{clearTimeout(I)})}async function y(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;try{return await g()}catch(I){const k=[408,429,500,502,503,504];if(I.name==="AbortError"||k.includes(I.statusCode))return await new Promise(($,P)=>{b<u?(f&&console.warn(`Access node unavailable, retrying in ${c} ms...`),setTimeout(()=>{$(y(b+1))},c)):P(I)});throw I}}return await y()}function Qi(e){try{return JSON.parse(e)}catch{return null}}async function eu(e,t,n){const o=await(n.httpRequest||ee)({hostname:n.node,path:`/v1/scripts?block_id=${e.block.id}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(s=>t.Buffer.from(JSON.stringify(e.arguments[s].asArgument)).toString("base64"))}});return Ln(e,t,o)}async function tu(e,t,n){const o=await(n.httpRequest||ee)({hostname:n.node,path:`/v1/scripts?block_height=${e.block.height}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(s=>t.Buffer.from(JSON.stringify(e.arguments[s].asArgument)).toString("base64"))}});return Ln(e,t,o)}async function nu(e,t,n){const o=await(n.httpRequest||ee)({hostname:n.node,path:"/v1/scripts?block_height=sealed",method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(s=>t.Buffer.from(JSON.stringify(e.arguments[s].asArgument)).toString("base64"))}});return Ln(e,t,o)}function Ln(e,t,n){let r=t.response();return r.tag=e.tag,r.encodedData=JSON.parse(t.Buffer.from(n,"base64").toString()),r}async function ru(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return v(n.node,"SDK Send Execute Script Error: opts.node must be defined."),v(t.response,"SDK Send Execute Script Error: context.response must be defined."),v(t.Buffer,"SDK Send Execute Script Error: context.Buffer must be defined."),e=await e,e.block.id?await eu(e,t,n):e.block.height?await tu(e,t,n):await nu(e,t,n)}const ou={SHA2_256:1,SHA2_384:2,SHA3_256:3,SHA3_384:4,KMAC128_BLS_BLS12_381:5},au={ECDSA_P256:1,ECDSA_secp256k1:2,BLS_BLS12_381:3};async function su(e,t,n){const o=await(n.httpRequest||ee)({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.height}&expand=contracts,keys`,method:"GET",body:null});return Xo(e,t,o)}async function iu(e,t,n){const o=await(n.httpRequest||ee)({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=sealed&expand=contracts,keys`,method:"GET",body:null});return Xo(e,t,o)}function Xo(e,t,n){let r=t.response();r.tag=e.tag;const o=s=>{const u={};if(!s)return u;for(let c of Object.keys(s))u[c]=t.Buffer.from(s[c],"base64").toString();return u};return r.account={address:n.address,balance:Number(n.balance),code:"",contracts:o(n.contracts),keys:n.keys?.map(s=>({index:Number(s.index),publicKey:s.public_key.replace(/^0x/,""),signAlgo:au[s.signing_algorithm],signAlgoString:s.signing_algorithm,hashAlgo:ou[s.hashing_algorithm],hashAlgoString:s.hashing_algorithm,sequenceNumber:Number(s.sequence_number),weight:Number(s.weight),revoked:s.revoked}))??[]},r}async function uu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return v(n.node,"SDK Send Get Account Error: opts.node must be defined."),v(t.response,"SDK Send Get Account Error: context.response must be defined."),v(t.Buffer,"SDK Send Get Account Error: context.Buffer must be defined."),e=await e,e.block.height!==null?await su(e,t,n):await iu(e,t,n)}async function cu(e,t,n){const o=await(n.httpRequest||ee)({hostname:n.node,path:`/v1/blocks/${e.block.id}`,method:"GET",body:null});return Un(e,t,o)}async function lu(e,t,n){const o=await(n.httpRequest||ee)({hostname:n.node,path:`/v1/blocks?height=${e.block.height}`,method:"GET",body:null});return Un(e,t,o)}async function du(e,t,n){const r=n.httpRequest||ee,o=e.block?.isSealed?"sealed":"final",s=await r({hostname:n.node,path:`/v1/blocks?height=${o}`,method:"GET",body:null});return Un(e,t,s)}function Un(e,t,n){const r=n.length?n[0]:null,o=t.response();return o.tag=e.tag,o.blockHeader={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp},o}async function fu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v(n.node,"SDK Send Get Block Header Error: opts.node must be defined."),v(t.response,"SDK Send Get Block Header Error: context.response must be defined."),e=await e;const r=e.block.id!==null,o=e.block.height!==null;return r?await cu(e,t,n):o?await lu(e,t,n):await du(e,t,n)}async function pu(e,t,n){const o=await(n.httpRequest||ee)({hostname:n.node,path:`/v1/blocks/${e.block.id}?expand=payload`,method:"GET",body:null});return Gn(e,t,o)}async function gu(e,t,n){const o=await(n.httpRequest||ee)({hostname:n.node,path:`/v1/blocks?height=${e.block.height}&expand=payload`,method:"GET",body:null});return Gn(e,t,o)}async function hu(e,t,n){const r=n.httpRequest||ee,o=e.block?.isSealed?"sealed":"final",s=await r({hostname:n.node,path:`/v1/blocks?height=${o}&expand=payload`,method:"GET",body:null});return Gn(e,t,s)}function Gn(e,t,n){const r=n.length?n[0]:null,o=t.response();return o.tag=e.tag,o.block={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp,collectionGuarantees:r.payload.collection_guarantees.map(s=>({collectionId:s.collection_id,signerIds:s.signer_ids})),blockSeals:r.payload.block_seals.map(s=>({blockId:s.block_id,executionReceiptId:s.result_id}))},o}async function mu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v(n.node,"SDK Send Get Block Error: opts.node must be defined."),v(t.response,"SDK Send Get Block Error: context.response must be defined."),e=await e;const r=e.block.id!==null,o=e.block.height!==null;return r?await pu(e,t,n):o?await gu(e,t,n):await hu(e,t,n)}async function yu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v(n.node,"SDK Send Get Collection Error: opts.node must be defined."),v(t.response,"SDK Send Get Collection Error: context.response must be defined.");const o=await(n.httpRequest||ee)({hostname:n.node,path:`/v1/collections/${e.collection.id}?expand=transactions`,method:"GET",body:null}),s=t.response();return s.tag=e.tag,s.collection={id:o.id,transactionIds:o.transactions.map(u=>u.id)},s}async function wu(e,t,n){const o=await(n.httpRequest||ee)({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&start_height=${e.events.start}&end_height=${e.events.end}`,method:"GET",body:null});return Zo(e,t,o)}async function Eu(e,t,n){const o=await(n.httpRequest||ee)({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&block_ids=${e.events.blockIds.join(",")}`,method:"GET",body:null});return Zo(e,t,o)}function Zo(e,t,n){let r=t.response();return r.tag=e.tag,r.events=[],n.forEach(o=>o.events?o.events.forEach(s=>r.events.push({blockId:o.block_id,blockHeight:Number(o.block_height),blockTimestamp:o.block_timestamp,type:s.type,transactionId:s.transaction_id,transactionIndex:Number(s.transaction_index),eventIndex:Number(s.event_index),payload:JSON.parse(t.Buffer.from(s.payload,"base64").toString())})):null),r}async function bu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v(n.node,"SDK Send Get Events Error: opts.node must be defined."),v(t.response,"SDK Send Get Events Error: context.response must be defined."),v(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined."),e=await e;const r=e.events.start!==null,o=Array.isArray(e.events.blockIds)&&e.events.blockIds.length>0;return v(r||o,"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified."),r?await wu(e,t,n):await Eu(e,t,n)}async function Su(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v(n.node,"SDK Send Get Transaction Error: opts.node must be defined."),v(t.response,"SDK Send Get Transaction Error: context.response must be defined."),v(t.Buffer,"SDK Send Get Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||ee;e=await e;const o=await r({hostname:n.node,path:`/v1/transactions/${e.transaction.id}`,method:"GET",body:null}),s=f=>({address:f.address,keyId:Number(f.key_id),sequenceNumber:Number(f.sequence_number)}),u=f=>({address:f.address,keyId:Number(f.key_index),signature:f.signature}),c=f=>JSON.parse(t.Buffer.from(f,"base64").toString());let p=t.response();return p.tag=e.tag,p.transaction={script:t.Buffer.from(o.script,"base64").toString(),args:[...o.arguments.map(c)],referenceBlockId:o.reference_block_id,gasLimit:Number(o.gas_limit),payer:o.payer,proposalKey:o.proposal_key?s(o.proposal_key):o.proposal_key,authorizers:o.authorizers,payloadSignatures:[...o.payload_signatures.map(u)],envelopeSignatures:[...o.envelope_signatures.map(u)]},p}const vu={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5};async function Ru(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v(n.node,"SDK Send Get Transaction Status Error: opts.node must be defined."),v(t.response,"SDK Send Get Transaction Status Error: context.response must be defined."),v(t.Buffer,"SDK Send Get Transaction Status Error: context.Buffer must be defined.");const r=n.httpRequest||ee;e=await e;const o=await r({hostname:n.node,path:`/v1/transaction_results/${e.transaction.id}`,method:"GET",body:null});let s=t.response();return s.tag=e.tag,s.transactionStatus={blockId:o.block_id,status:vu[o.status.toUpperCase()]||"",statusString:o.status.toUpperCase(),statusCode:o.status_code,errorMessage:o.error_message,events:o.events.map(u=>({type:u.type,transactionId:u.transaction_id,transactionIndex:Number(u.transaction_index),eventIndex:Number(u.event_index),payload:JSON.parse(t.Buffer.from(u.payload,"base64").toString())}))},s}async function Iu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v(n.node,"SDK Send Ping Error: opts.node must be defined."),v(t.response,"SDK Send Ping Error: context.response must be defined."),await(n.httpRequest||ee)({hostname:n.node,path:"/v1/blocks?height=sealed",method:"GET",body:null});let o=t.response();return o.tag=e.tag,o}const Au=e=>`${withPrefix(e.addr)}-${e.keyId}`;async function Cu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v(n.node,"SDK Send Transaction Error: opts.node must be defined."),v(t.response,"SDK Send Transaction Error: context.response must be defined."),v(t.Buffer,"SDK Send Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||ee;e=await e;let o=[];for(let h of Object.values(e.accounts))try{!h.role.payer&&h.signature!=null&&o.push({address:J(h.addr),key_index:String(h.keyId),signature:t.Buffer.from(h.signature,"hex").toString("base64")})}catch(g){throw console.error("SDK HTTP Send Error: Trouble applying payload signature",{acct:h,ix:e}),g}let s={};for(let h of Object.values(e.accounts))try{if(h.role.payer&&h.signature!=null){let g=h.tempId||Au(h);s[g]=s[g]||{address:J(h.addr),key_index:String(h.keyId),signature:t.Buffer.from(h.signature,"hex").toString("base64")}}}catch(g){throw console.error("SDK HTTP Send Error: Trouble applying envelope signature",{acct:h,ix:e}),g}s=Object.values(s);var u=Date.now();const c=await r({hostname:n.node,path:"/v1/transactions",method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:[...e.message.arguments.map(h=>t.Buffer.from(JSON.stringify(e.arguments[h].asArgument)).toString("base64"))],reference_block_id:e.message.refBlock?e.message.refBlock:null,gas_limit:String(e.message.computeLimit),payer:J(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),proposal_key:{address:J(e.accounts[e.proposer].addr),key_index:String(e.accounts[e.proposer].keyId),sequence_number:String(e.accounts[e.proposer].sequenceNum)},authorizers:e.authorizations.map(h=>e.accounts[h].addr).reduce((h,g)=>h.find(y=>y===g)?h:[...h,g],[]).map(J),payload_signatures:o,envelope_signatures:s}});var p=Date.now();let f=t.response();return f.tag=e.tag,f.transactionId=c.id,typeof window<"u"&&typeof CustomEvent<"u"&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:f.transactionId,delta:p-u}})),f}async function Tu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v(n.node,"SDK Send Get Network Parameters Error: opts.node must be defined."),v(t.response,"SDK Send Get Network Parameters Error: context.response must be defined.");const r=n.httpRequest||ee;e=await e;const o=await r({hostname:n.node,path:"/v1/network/parameters",method:"GET",body:null,enableRequestLogging:n.enableRequestLogging??!0});let s=t.response();return s.tag=e.tag,s.networkParameters={chainId:o.chain_id},s}const Mn=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};switch(v(n.node,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),v(t.ix,"SDK Send Error: context.ix must be defined."),e=await e,!0){case t.ix.isTransaction(e):return n.sendTransaction?n.sendTransaction(e,t,n):Cu(e,t,n);case t.ix.isGetTransactionStatus(e):return n.sendGetTransactionStatus?n.sendGetTransactionStatus(e,t,n):Ru(e,t,n);case t.ix.isGetTransaction(e):return n.sendGetTransaction?n.sendGetTransaction(e,t,n):Su(e,t,n);case t.ix.isScript(e):return n.sendExecuteScript?n.sendExecuteScript(e,t,n):ru(e,t,n);case t.ix.isGetAccount(e):return n.sendGetAccount?n.sendGetAccount(e,t,n):uu(e,t,n);case t.ix.isGetEvents(e):return n.sendGetEvents?n.sendGetEvents(e,t,n):bu(e,t,n);case t.ix.isGetBlock(e):return n.sendGetBlock?n.sendGetBlock(e,t,n):mu(e,t,n);case t.ix.isGetBlockHeader(e):return n.sendGetBlockHeader?n.sendGetBlockHeader(e,t,n):fu(e,t,n);case t.ix.isGetCollection(e):return n.sendGetCollection?n.sendGetCollection(e,t,n):yu(e,t,n);case t.ix.isPing(e):return n.sendPing?n.sendPing(e,t,n):Iu(e,t,n);case t.ix.isGetNetworkParameters(e):return n.sendGetNetworkParameters?n.sendGetNetworkParameters(e,t,n):Tu(e,t,n);default:return e}};var ku={},Qo={},ea={},ta={},$u=function(t,n){return function(r,o){var s=o*2,u=n*2;r[s]=t[u],r[s+1]=t[u+1]}},qn=$u;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(qn);function n(s){return s&&s.__esModule?s:{default:s}}var r=function(u){for(var c=u.A,p=u.C,f=0;f<25;f+=5){for(var h=0;h<5;h++)(0,t.default)(c,f+h)(p,h);for(var g=0;g<5;g++){var y=(f+g)*2,b=(g+1)%5*2,I=(g+2)%5*2;c[y]^=~p[b]&p[I],c[y+1]^=~p[b+1]&p[I+1]}}},o=r;e.default=o})(ta);var na={},ra={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]),n=t;e.default=n})(ra);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(ra);function n(s){return s&&s.__esModule?s:{default:s}}var r=function(u){var c=u.A,p=u.roundIndex,f=p*2;c[0]^=t.default[f],c[1]^=t.default[f+1]},o=r;e.default=o})(na);var oa={},aa={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1],n=t;e.default=n})(aa);var sa={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44],n=t;e.default=n})(sa);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(aa),n=o(sa),r=o(qn);function o(c){return c&&c.__esModule?c:{default:c}}var s=function(p){var f=p.A,h=p.C,g=p.W;(0,r.default)(f,1)(g,0);for(var y=0,b=0,I=0,k=32,$=0;$<24;$++){var P=t.default[$],F=n.default[$];(0,r.default)(f,P)(h,0),y=g[0],b=g[1],k=32-F,I=F<32?0:1,g[I]=y<<F|b>>>k,g[(I+1)%2]=b<<F|y>>>k,(0,r.default)(g,0)(f,P),(0,r.default)(h,0)(g,0)}},u=s;e.default=u})(oa);var ia={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(qn);function n(s){return s&&s.__esModule?s:{default:s}}var r=function(u){for(var c=u.A,p=u.C,f=u.D,h=u.W,g=0,y=0,b=0;b<5;b++){var I=b*2,k=(b+5)*2,$=(b+10)*2,P=(b+15)*2,F=(b+20)*2;p[I]=c[I]^c[k]^c[$]^c[P]^c[F],p[I+1]=c[I+1]^c[k+1]^c[$+1]^c[P+1]^c[F+1]}for(var A=0;A<5;A++){(0,t.default)(p,(A+1)%5)(h,0),g=h[0],y=h[1],h[0]=g<<1|y>>>31,h[1]=y<<1|g>>>31,f[A*2]=p[(A+4)%5*2]^h[0],f[A*2+1]=p[(A+4)%5*2+1]^h[1];for(var B=0;B<25;B+=5)c[(B+A)*2]^=f[A*2],c[(B+A)*2+1]^=f[A*2+1]}},o=r;e.default=o})(ia);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s(ta),n=s(na),r=s(oa),o=s(ia);function s(p){return p&&p.__esModule?p:{default:p}}var u=function(){var f=new Uint32Array(10),h=new Uint32Array(10),g=new Uint32Array(2);return function(y){for(var b=0;b<24;b++)(0,o.default)({A:y,C:f,D:h,W:g}),(0,r.default)({A:y,C:f,W:g}),(0,t.default)({A:y,C:f}),(0,n.default)({A:y,roundIndex:b});f.fill(0),h.fill(0),g.fill(0)}},c=u;e.default=c})(ea);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=j,n=r(ea);function r(p){return p&&p.__esModule?p:{default:p}}var o=function(f,h){for(var g=0;g<f.length;g+=8){var y=g/4;h[y]^=f[g+7]<<24|f[g+6]<<16|f[g+5]<<8|f[g+4],h[y+1]^=f[g+3]<<24|f[g+2]<<16|f[g+1]<<8|f[g]}return h},s=function(f,h){for(var g=0;g<h.length;g+=8){var y=g/4;h[g]=f[y+1],h[g+1]=f[y+1]>>>8,h[g+2]=f[y+1]>>>16,h[g+3]=f[y+1]>>>24,h[g+4]=f[y],h[g+5]=f[y]>>>8,h[g+6]=f[y]>>>16,h[g+7]=f[y]>>>24}return h},u=function(f){var h=this,g=f.capacity,y=f.padding,b=(0,n.default)(),I=200,k=g/8,$=I-g/4,P=0,F=new Uint32Array(I/4),A=t.Buffer.allocUnsafe($);return this.absorb=function(B){for(var C=0;C<B.length;C++)A[P]=B[C],P+=1,P>=$&&(o(A,F),b(F),P=0);return h},this.squeeze=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C={buffer:B.buffer||t.Buffer.allocUnsafe(k),padding:B.padding||y,queue:t.Buffer.allocUnsafe(A.length),state:new Uint32Array(F.length)};A.copy(C.queue);for(var fe=0;fe<F.length;fe++)C.state[fe]=F[fe];C.queue.fill(0,P),C.queue[P]|=C.padding,C.queue[$-1]|=128,o(C.queue,C.state);for(var pe=0;pe<C.buffer.length;pe+=$)b(C.state),s(C.state,C.buffer.slice(pe,pe+$));return C.buffer},this.reset=function(){return A.fill(0),F.fill(0),P=0,h},this},c=u;e.default=c})(Qo);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SHAKE=e.SHA3Hash=e.SHA3=e.Keccak=void 0;var t=j,n=r(Qo);function r(h){return h&&h.__esModule?h:{default:h}}var o=function(g){var y=g.allowedSizes,b=g.defaultSize,I=g.padding;return function k(){var $=this,P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;if(!this||this.constructor!==k)return new k(P);if(y&&!y.includes(P))throw new Error("Unsupported hash length");var F=new n.default({capacity:P});return this.update=function(A){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"utf8";if(t.Buffer.isBuffer(A))return F.absorb(A),$;if(typeof A=="string")return $.update(t.Buffer.from(A,B));throw new TypeError("Not a string or buffer")},this.digest=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"binary",B=typeof A=="string"?{format:A}:A,C=F.squeeze({buffer:B.buffer,padding:B.padding||I});return B.format&&B.format!=="binary"?C.toString(B.format):C},this.reset=function(){return F.reset(),$},this}},s=o({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});e.Keccak=s;var u=o({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});e.SHA3=u;var c=o({allowedSizes:[128,256],defaultSize:256,padding:31});e.SHAKE=c;var p=s;e.SHA3Hash=p,u.SHA3Hash=p;var f=u;e.default=f})(ku);var Pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let Or;var Bu=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Pu):e=>(Or||(Or=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0));const Fu=()=>{const e=[];var t;return{async deliver(n){e.push(n),t&&(t(e.shift()),t=void 0)},receive(){return new Promise(function(r){const o=e.shift();if(o)return r(o);t=r})}}},Dr="INIT",jn="SUBSCRIBE",qt="UNSUBSCRIBE",Nu="UPDATED",_u="EXIT",Lr="TERMINATE",G=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||typeof window=="object"&&window.window===window&&window;G.FCL_REGISTRY=G.FCL_REGISTRY==null?{}:G.FCL_REGISTRY;var Ou=0;const Du=5e3,Q=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return new Promise((o,s)=>{const u=r.expectReply||!1,c=r.timeout!=null?r.timeout:Du;u&&c&&setTimeout(()=>s(new Error(`Timeout: ${c}ms passed without a response.`)),c);const p={to:e,from:r.from,tag:t,data:n,timeout:c,reply:o,reject:s};try{G.FCL_REGISTRY[e]&&G.FCL_REGISTRY[e].mailbox.deliver(p),u||o(!0)}catch(f){console.error("FCL.Actor -- Could Not Deliver Message",p,G.FCL_REGISTRY[e],f)}})},Lu=e=>{delete G.FCL_REGISTRY[e]},Uu=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return async t=>{typeof e[Dr]=="function"&&await e[Dr](t);e:for(;;){const n=await t.receive();try{if(n.tag===_u){typeof e[Lr]=="function"&&await e[Lr](t,n,n.data||{});break e}await e[n.tag](t,n,n.data||{})}catch(r){console.error(`${t.self()} Error`,n,r)}finally{continue e}}}},kt=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(t==null&&(t=++Ou),G.FCL_REGISTRY[t]!=null)return t;G.FCL_REGISTRY[t]={addr:t,mailbox:Fu(),subs:new Set,kvs:{},error:null};const n={self:()=>t,receive:()=>G.FCL_REGISTRY[t].mailbox.receive(),send:function(r,o,s){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return u.from=t,Q(r,o,s,u)},sendSelf:(r,o,s)=>{G.FCL_REGISTRY[t]&&Q(t,r,o,s)},broadcast:function(r,o){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s.from=t;for(let u of G.FCL_REGISTRY[t].subs)Q(u,r,o,s)},subscribe:r=>r!=null&&G.FCL_REGISTRY[t].subs.add(r),unsubscribe:r=>r!=null&&G.FCL_REGISTRY[t].subs.delete(r),subscriberCount:()=>G.FCL_REGISTRY[t].subs.size,hasSubs:()=>!!G.FCL_REGISTRY[t].subs.size,put:(r,o)=>{r!=null&&(G.FCL_REGISTRY[t].kvs[r]=o)},get:(r,o)=>{const s=G.FCL_REGISTRY[t].kvs[r];return s??o},delete:r=>{delete G.FCL_REGISTRY[t].kvs[r]},update:(r,o)=>{r!=null&&(G.FCL_REGISTRY[t].kvs[r]=o(G.FCL_REGISTRY[t].kvs[r]))},keys:()=>Object.keys(G.FCL_REGISTRY[t].kvs),all:()=>G.FCL_REGISTRY[t].kvs,where:r=>Object.keys(G.FCL_REGISTRY[t].kvs).reduce((o,s)=>r.test(s)?{...o,[s]:G.FCL_REGISTRY[t].kvs[s]}:o,{}),merge:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(r).forEach(o=>G.FCL_REGISTRY[t].kvs[o]=r[o])},fatalError:r=>{G.FCL_REGISTRY[t].error=r;for(let o of G.FCL_REGISTRY[t].subs)Q(o,Nu)}};return typeof e=="object"&&(e=Uu(e)),Bu(async()=>{await e(n),Lu(t)}),t};function ua(e,t,n){t(e);const r="@EXIT",o=kt(async s=>{for(s.send(e,jn);;){const u=await s.receive(),c=G.FCL_REGISTRY[e].error;if(u.tag===r){s.send(e,qt);return}if(c){n(null,c),s.send(e,qt);return}n(u.data,null)}});return()=>Q(o,r)}function Ur(e,t){if(!e){const s=new Error(`INVARIANT ${t}`);s.stack=s.stack.split(`
`).filter(u=>!/at invariant/.test(u)).join(`
`);for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];throw console.error(`

---

`,s,`

`,...r,`

---

`),s}}const Gr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((o,s)=>s(o),r)},Gu=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((o,s)=>({...o,...s(r)}),{})},Dt=e=>e&&typeof e=="object"&&!Array.isArray(e),Sn=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const o=n.shift();if(Dt(e)&&Dt(o))for(const s in o)Dt(o[s])?(e[s]||Object.assign(e,{[s]:{}}),Sn(e[s],o[s])):Object.assign(e,{[s]:o[s]});return Sn(e,...n)},Mu=e=>Array.isArray(e)?Sn({},...e):e,qu=e=>e.contracts?e.contracts:{},ju=e=>t=>Object.entries(t).reduce((n,r)=>{let[o,s]=r;const u=s?.aliases?.[e];return u&&(n[o]=u),n},{}),Hu=e=>t=>{let{deployments:n={},accounts:r={}}=t;const o=n?.[e];return o?Object.entries(o).reduce((s,u)=>{let[c,p]=u;const f=r[c]?.address;return f?p.reduce((h,g)=>({...h,[g]:f}),{}):s},{}):{}},zu=(e,t)=>Gr(Mu,Gu(Hu(t),Gr(qu,ju(t))))(e),Yu=e=>typeof e!="string"?!1:/^[0-9A-Fa-f]+$/.test(e),Mr=e=>Object.entries(e?.accounts).reduce((t,n)=>{let[r,o]=n;return t?!0:o?.hasOwnProperty("key")&&Yu(o?.key)},!1),Ku=e=>Dt(e)?Mr(e):e.some(Mr),Wu=e=>e?.toLowerCase()==="local"?"emulator":e?.toLowerCase(),Be="config",ca="PUT_CONFIG",la="GET_CONFIG",da="GET_ALL_CONFIG",fa="UPDATE_CONFIG",pa="DELETE_CONFIG",ga="CLEAR_CONFIG",ha="WHERE_CONFIG",yt="CONFIG/UPDATED",ma=e=>e,ya={[ca]:(e,t,n)=>{let{key:r,value:o}=n;if(r==null)throw new Error("Missing 'key' for config/put.");e.put(r,o),e.broadcast(yt,{...e.all()})},[la]:(e,t,n)=>{let{key:r,fallback:o}=n;if(r==null)throw new Error("Missing 'key' for config/get");t.reply(e.get(r,o))},[da]:(e,t)=>{t.reply({...e.all()})},[fa]:(e,t,n)=>{let{key:r,fn:o}=n;if(r==null)throw new Error("Missing 'key' for config/update");e.update(r,o||ma),e.broadcast(yt,{...e.all()})},[pa]:(e,t,n)=>{let{key:r}=n;if(r==null)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(yt,{...e.all()})},[ga]:(e,t)=>{let n=Object.keys(e.all());for(let r of n)e.delete(r);e.broadcast(yt,{...e.all()})},[ha]:(e,t,n)=>{let{pattern:r}=n;if(r==null)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(r))},[jn]:(e,t)=>{e.subscribe(t.from),e.send(t.from,yt,{...e.all()})},[qt]:(e,t)=>{e.unsubscribe(t.from)}};kt(ya,Be);function Rt(e,t){return Q(Be,ca,{key:e,value:t}),ce()}function at(e,t){return Q(Be,la,{key:e,fallback:t},{expectReply:!0,timeout:10})}async function Hn(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return t;const[n,...r]=e,o=await at(n);return o??Hn(r,t)}function jt(){return Q(Be,da,null,{expectReply:!0,timeout:10})}function wa(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ma;return Q(Be,fa,{key:e,fn:t}),ce()}function Ea(e){return Q(Be,pa,{key:e}),ce()}function ba(e){return Q(Be,ha,{pattern:e},{expectReply:!0,timeout:10})}function Sa(e){return ua(Be,()=>kt(ya,Be),e)}function Vu(){return Q(Be,ga)}function qr(e){return Vu().then(ce(e))}async function va(e){const t=await at("flow.network"),n=Wu(t),{flowJSON:r}=e;if(Ur(!!r,"config.load -- 'flowJSON' must be defined"),Ur(n,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),Ku(r)){const o=n==="emulator";if(Ue({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:o?ge.warn:ge.error}),!o)return}for(const[o,s]of Object.entries(zu(r,n))){const u=`0x${o}`,c=await at(u);c&&c!==s?Ue({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:ge.warn}):Rt(u,s);const p=`system.contracts.${o}`,f=await at(p);f&&f!==s?Ue({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:ge.warn}):Rt(p,s)}}function ce(e){return e!=null&&typeof e=="object"&&Object.keys(e).map(t=>Rt(t,e[t])),{put:Rt,get:at,all:jt,first:Hn,update:wa,delete:Ea,where:ba,subscribe:Sa,overload:Ra,load:va}}ce.put=Rt;ce.get=at;ce.all=jt;ce.first=Hn;ce.update=wa;ce.delete=Ea;ce.where=ba;ce.subscribe=Sa;ce.overload=Ra;ce.load=va;const xu=e=>e;function Ra(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xu;return new Promise(async(n,r)=>{const o=await jt();try{ce(e);var s=await t(await jt());await qr(o),n(s)}catch(u){await qr(o),r(u)}})}const ge=Object.freeze({debug:5,info:4,log:3,warn:2,error:1}),Ju=e=>{let{title:t,message:n}=e;return[`
    %c${t}
    ============================

    ${n}

    ============================
    `.replace(/\n[^\S\r\n]+/g,`
`).trim(),,"font-weight:bold;font-family:monospace;"]},Ue=async e=>{let{title:t,message:n,level:r,always:o=!1}=e;const s=await ce.get("logger.level",ge.warn);if(!o&&s<r)return;const u=Ju({title:t,message:n});switch(r){case ge.debug:console.debug(...u);break;case ge.info:console.info(...u);break;case ge.warn:console.warn(...u);break;case ge.error:console.error(...u);break;default:console.log(...u)}};Ue.deprecate=e=>{let{pkg:t,subject:n,transition:r,level:o=ge.warn,message:s="",callback:u=null}=e;const c=f=>f.charAt(0).toUpperCase()+f.slice(1),p=()=>Ue({title:`${t?t+" ":""}Deprecation Notice`,message:`
      ${n?`${c(n)} is deprecated and will cease to work in future releases${t?" of "+t:""}.`:""}${s?`
`+s:""}${r?`
You can learn more (including a guide on common transition paths) here: ${r}`:""}
    `.trim(),level:o});return typeof u=="function"?async function(){return await p(),await u(...arguments)}:p()};function jr(e,t){if(!e){const s=new Error(`INVARIANT ${t}`);s.stack=s.stack.split(`
`).filter(u=>!/at invariant/.test(u)).join(`
`);for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];throw console.error(`

---

`,s,`

`,...r,`

---

`),s}}const Hr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((o,s)=>s(o),r)},Xu=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((o,s)=>({...o,...s(r)}),{})},Lt=e=>e&&typeof e=="object"&&!Array.isArray(e),vn=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const o=n.shift();if(Lt(e)&&Lt(o))for(const s in o)Lt(o[s])?(e[s]||Object.assign(e,{[s]:{}}),vn(e[s],o[s])):Object.assign(e,{[s]:o[s]});return vn(e,...n)},Zu=e=>Array.isArray(e)?vn({},...e):e,Qu=e=>e.contracts?e.contracts:{},ec=e=>t=>Object.entries(t).reduce((n,r)=>{let[o,s]=r;const u=s?.aliases?.[e];return u&&(n[o]=u),n},{}),tc=e=>t=>{let{deployments:n={},accounts:r={}}=t;const o=n?.[e];return o?Object.entries(o).reduce((s,u)=>{let[c,p]=u;const f=r[c]?.address;return f?p.reduce((h,g)=>({...h,[g]:f}),{}):s},{}):{}},nc=(e,t)=>Hr(Zu,Xu(tc(t),Hr(Qu,ec(t))))(e),rc=e=>typeof e!="string"?!1:/^[0-9A-Fa-f]+$/.test(e),zr=e=>Object.entries(e?.accounts).reduce((t,n)=>{let[r,o]=n;return t?!0:o?.hasOwnProperty("key")&&rc(o?.key)},!1),oc=e=>Lt(e)?zr(e):e.some(zr),ac=e=>e?.toLowerCase()==="local"?"emulator":e?.toLowerCase(),Fe="config",Ia="PUT_CONFIG",Aa="GET_CONFIG",Ca="GET_ALL_CONFIG",Ta="UPDATE_CONFIG",ka="DELETE_CONFIG",$a="CLEAR_CONFIG",Pa="WHERE_CONFIG",wt="CONFIG/UPDATED",Ba=e=>e,Fa={[Ia]:(e,t,n)=>{let{key:r,value:o}=n;if(r==null)throw new Error("Missing 'key' for config/put.");e.put(r,o),e.broadcast(wt,{...e.all()})},[Aa]:(e,t,n)=>{let{key:r,fallback:o}=n;if(r==null)throw new Error("Missing 'key' for config/get");t.reply(e.get(r,o))},[Ca]:(e,t)=>{t.reply({...e.all()})},[Ta]:(e,t,n)=>{let{key:r,fn:o}=n;if(r==null)throw new Error("Missing 'key' for config/update");e.update(r,o||Ba),e.broadcast(wt,{...e.all()})},[ka]:(e,t,n)=>{let{key:r}=n;if(r==null)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(wt,{...e.all()})},[$a]:(e,t)=>{let n=Object.keys(e.all());for(let r of n)e.delete(r);e.broadcast(wt,{...e.all()})},[Pa]:(e,t,n)=>{let{pattern:r}=n;if(r==null)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(r))},[jn]:(e,t)=>{e.subscribe(t.from),e.send(t.from,wt,{...e.all()})},[qt]:(e,t)=>{e.unsubscribe(t.from)}};kt(Fa,Fe);function It(e,t){return Q(Fe,Ia,{key:e,value:t}),le()}function st(e,t){return Q(Fe,Aa,{key:e,fallback:t},{expectReply:!0,timeout:10})}async function zn(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return t;const[n,...r]=e,o=await st(n);return o??zn(r,t)}function Ht(){return Q(Fe,Ca,null,{expectReply:!0,timeout:10})}function Na(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ba;return Q(Fe,Ta,{key:e,fn:t}),le()}function _a(e){return Q(Fe,ka,{key:e}),le()}function Oa(e){return Q(Fe,Pa,{pattern:e},{expectReply:!0,timeout:10})}function Da(e){return ua(Fe,()=>kt(Fa,Fe),e)}function sc(){return Q(Fe,$a)}function Yr(e){return sc().then(le(e))}async function La(e){const t=await st("flow.network"),n=ac(t),{flowJSON:r}=e;if(jr(!!r,"config.load -- 'flowJSON' must be defined"),jr(n,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),oc(r)){const o=n==="emulator";if(Ue({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:o?ge.warn:ge.error}),!o)return}for(const[o,s]of Object.entries(nc(r,n))){const u=`0x${o}`,c=await st(u);c&&c!==s?Ue({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:ge.warn}):It(u,s);const p=`system.contracts.${o}`,f=await st(p);f&&f!==s?Ue({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:ge.warn}):It(p,s)}}function le(e){return e!=null&&typeof e=="object"&&Object.keys(e).map(t=>It(t,e[t])),{put:It,get:st,all:Ht,first:zn,update:Na,delete:_a,where:Oa,subscribe:Da,overload:Ua,load:La}}le.put=It;le.get=st;le.all=Ht;le.first=zn;le.update=Na;le.delete=_a;le.where=Oa;le.subscribe=Da;le.overload=Ua;le.load=La;const ic=e=>e;function Ua(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ic;return new Promise(async(n,r)=>{const o=await Ht();try{le(e);var s=await t(await Ht());await Yr(o),n(s)}catch(u){await Yr(o),r(u)}})}const rt=Object.freeze({debug:5,info:4,log:3,warn:2,error:1}),uc=e=>{let{title:t,message:n}=e;return[`
    %c${t}
    ============================

    ${n}

    ============================
    `.replace(/\n[^\S\r\n]+/g,`
`).trim(),,"font-weight:bold;font-family:monospace;"]},Rn=async e=>{let{title:t,message:n,level:r,always:o=!1}=e;const s=await le.get("logger.level",rt.warn);if(!o&&s<r)return;const u=uc({title:t,message:n});switch(r){case rt.debug:console.debug(...u);break;case rt.info:console.info(...u);break;case rt.warn:console.warn(...u);break;case rt.error:console.error(...u);break;default:console.log(...u)}};Rn.deprecate=e=>{let{pkg:t,subject:n,transition:r,level:o=rt.warn,message:s="",callback:u=null}=e;const c=f=>f.charAt(0).toUpperCase()+f.slice(1),p=()=>Rn({title:`${t?t+" ":""}Deprecation Notice`,message:`
      ${n?`${c(n)} is deprecated and will cease to work in future releases${t?" of "+t:""}.`:""}${s?`
`+s:""}${r?`
You can learn more (including a guide on common transition paths) here: ${r}`:""}
    `.trim(),level:o});return typeof u=="function"?async function(){return await p(),await u(...arguments)}:p()};function Ga(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(!e.length&&!t.length||!e.length)return n;if(!t.length)return[...n,e[0]];const[r,...o]=e,[s,...u]=t;return r!==void 0&&n.push(r),s!==void 0&&n.push(s),Ga(o,u,n)}function Ma(e){return function(t){return typeof t=="function"?(Rn.deprecate({pkg:"FCL/SDK",subject:"Interopolation of functions into template literals",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"}),Ma(e)(t(e))):String(t)}}function cc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return typeof e=="string"?()=>e:Array.isArray(e)?o=>Ga(e,n.map(Ma(o))).join("").trim():e}const Xt="UNKNOWN",Yn="SCRIPT",Kn="TRANSACTION",Wn="GET_TRANSACTION_STATUS",Vn="GET_ACCOUNT",xn="GET_EVENTS",Jn="PING",Xn="GET_TRANSACTION",Zn="GET_BLOCK",Qn="GET_BLOCK_HEADER",er="GET_COLLECTION",tr="GET_NETWORK_PARAMETERS",nr="BAD",Zt="OK",rr="ACCOUNT",qa="PARAM",or="ARGUMENT",ja="authorizer",Ha="payer",lc="proposer",dc=`{
  "kind":"${rr}",
  "tempId":null,
  "addr":null,
  "keyId":null,
  "sequenceNum":null,
  "signature":null,
  "signingFunction":null,
  "resolve":null,
  "role": {
    "proposer":false,
    "authorizer":false,
    "payer":false,
    "param":false
  }
}`,fc=`{
  "kind":"${or}",
  "tempId":null,
  "value":null,
  "asArgument":null,
  "xform":null,
  "resolve": null,
  "resolveArgument": null
}`,za=`{
  "tag":"${Xt}",
  "assigns":{},
  "status":"${Zt}",
  "reason":null,
  "accounts":{},
  "params":{},
  "arguments":{},
  "message": {
    "cadence":null,
    "refBlock":null,
    "computeLimit":null,
    "proposer":null,
    "payer":null,
    "authorizations":[],
    "params":[],
    "arguments":[]
  },
  "proposer":null,
  "authorizations":[],
  "payer":[],
  "events": {
    "eventType":null,
    "start":null,
    "end":null,
    "blockIds":[]
  },
  "transaction": {
    "id":null
  },
  "block": {
    "id":null,
    "height":null,
    "isSealed":null
  },
  "account": {
    "addr":null
  },
  "collection": {
    "id":null
  }
}`,Ya=new Set(Object.keys(JSON.parse(za))),ar=()=>JSON.parse(za),Kr="abcdefghijklmnopqrstuvwxyz0123456789".split(""),pc=()=>Kr[~~(Math.random()*Kr.length)],sr=()=>Array.from({length:10},pc).join(""),Ka=e=>typeof e=="number",Wa=e=>Array.isArray(e),Va=e=>e!==null&&typeof e=="object",ir=e=>e==null,lt=e=>typeof e=="function",xa=e=>{if(!Va(e)||ir(e)||Ka(e))return!1;for(let t of Ya)if(!e.hasOwnProperty(t))return!1;return!0},Ie=e=>(e.status=Zt,e),ur=(e,t)=>(e.status=nr,e.reason=t,e),be=e=>t=>(t.tag=e,Ie(t)),Wr=e=>e.keyId==null?e:(v(!isNaN(parseInt(e.keyId)),"account.keyId must be an integer"),{...e,keyId:parseInt(e.keyId)}),gc=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=>{v(typeof e=="function"||typeof e=="object","prepAccount must be passed an authorization function or an account object"),v(t.role!=null,"Account must have a role");const r=JSON.parse(dc),o=t.role,s=sr();e.authorization&&lt(e.authorization)&&(e={resolve:e.authorization}),!e.authorization&&lt(e)&&(e={resolve:e});const u=e.resolve;return u&&(e.resolve=function(c){for(var p=arguments.length,f=new Array(p>1?p-1:0),h=1;h<p;h++)f[h-1]=arguments[h];return[u,Wr].reduce(async(g,y)=>y(await g,...f),c)}),e=Wr(e),n.accounts[s]={...r,tempId:s,...e,role:{...r.role,...typeof e.role=="object"?e.role:{},[o]:!0}},o===ja?n.authorizations.push(s):o===Ha?n.payer.push(s):n[o]=s,n}},Ja=e=>t=>{let n=sr();return t.message.arguments.push(n),t.arguments[n]=JSON.parse(fc),t.arguments[n].tempId=n,t.arguments[n].value=e.value,t.arguments[n].asArgument=e.asArgument,t.arguments[n].xform=e.xform,t.arguments[n].resolve=e.resolve,t.arguments[n].resolveArgument=lt(e.resolveArgument)?e.resolveArgument.bind(e):e.resolveArgument,Ie(t)},hc=be(Xt),Xa=be(Yn),mc=be(Kn),yc=be(Wn),wc=be(Xn),Za=be(Vn),Ec=be(xn),bc=be(Jn),Qa=be(Zn),Sc=be(Qn),vc=be(er),es=be(tr),Se=e=>t=>t.tag===e,Rc=Se(Xt),cr=Se(Yn),Ge=Se(Kn),Ic=Se(Wn),Ac=Se(Xn),Cc=Se(Vn),Tc=Se(xn),kc=Se(Jn),$c=Se(Zn),Pc=Se(Qn),Bc=Se(er),Fc=Se(tr),Nc=e=>e.status===Zt,ts=e=>e.status===nr,_c=e=>e.reason,Oc=e=>e.kind===rr,Dc=e=>e.kind===qa,Lc=e=>e.kind===or,Uc=e=>{for(let t of Object.keys(e))if(!Ya.has(t))throw new Error(`"${t}" is an invalid root level Interaction property.`);return e},Ut=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];try{if(e=Uc(await e),ts(e))throw new Error(`Interaction Error: ${e.reason}`);if(!t.length)return e;const[n,...r]=t,o=await n;if(lt(o))return Ut(o(e),r);if(ir(o)||!o)return Ut(e,r);if(xa(o))return Ut(o,r);throw new Error("Invalid Interaction Composition")}catch(n){throw n}},Ae=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r,o]=t;return Wa(r)&&o==null?s=>Ae(s,r):Ut(r,o)},Gc=e=>e,Qt=(e,t,n)=>e.assigns[t]==null?n:e.assigns[t],ns=(e,t)=>n=>(n.assigns[e]=t,Ie(n)),Mc=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gc;return n=>(n.assigns[e]=t(n.assigns[e],n),Ie(n))},qc=e=>t=>(delete t.assigns[e],Ie(t));var lr=Object.freeze({__proto__:null,UNKNOWN:Xt,SCRIPT:Yn,TRANSACTION:Kn,GET_TRANSACTION_STATUS:Wn,GET_ACCOUNT:Vn,GET_EVENTS:xn,PING:Jn,GET_TRANSACTION:Xn,GET_BLOCK:Zn,GET_BLOCK_HEADER:Qn,GET_COLLECTION:er,GET_NETWORK_PARAMETERS:tr,BAD:nr,OK:Zt,ACCOUNT:rr,PARAM:qa,ARGUMENT:or,AUTHORIZER:ja,PAYER:Ha,PROPOSER:lc,interaction:ar,uuid:sr,isNumber:Ka,isArray:Wa,isObj:Va,isNull:ir,isFn:lt,isInteraction:xa,Ok:Ie,Bad:ur,prepAccount:gc,makeArgument:Ja,makeUnknown:hc,makeScript:Xa,makeTransaction:mc,makeGetTransactionStatus:yc,makeGetTransaction:wc,makeGetAccount:Za,makeGetEvents:Ec,makePing:bc,makeGetBlock:Qa,makeGetBlockHeader:Sc,makeGetCollection:vc,makeGetNetworkParameters:es,isUnknown:Rc,isScript:cr,isTransaction:Ge,isGetTransactionStatus:Ic,isGetTransaction:Ac,isGetAccount:Cc,isGetEvents:Tc,isPing:kc,isGetBlock:$c,isGetBlockHeader:Pc,isGetCollection:Bc,isGetNetworkParameters:Fc,isOk:Nc,isBad:ts,why:_c,isAccount:Oc,isParam:Dc,isArgument:Lc,pipe:Ae,get:Qt,put:ns,update:Mc,destroy:qc});function rs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ae(ar(),e)}const jc=`{
    "tag":null,
    "transaction":null,
    "transactionStatus":null,
    "transactionId":null,
    "encodedData":null,
    "events":null,
    "account":null,
    "block":null,
    "blockHeader":null,
    "latestBlock":null,
    "collection":null,
    "networkParameters":null
}`,dr=()=>JSON.parse(jc);function Hc(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return Ae([Qa,t=>(t.block.isSealed=e,Ie(t))])}function zc(e){return Ae([Za,t=>(t.account.addr=J(e),Ie(t))])}const Yc=()=>{oe.deprecate({pkg:"@onflow/decode",subject:"Operating upon data of the latestBlock field of the response object",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field"})},K=async e=>e,Kc=async()=>null,Wc=async e=>e.staticType,Vc=async e=>({domain:e.domain,identifier:e.identifier}),xc=async e=>({path:e.path,address:e.address,borrowType:e.borrowType}),Jc=async(e,t,n)=>e?await dt(e,t,n):null,Xc=async e=>({address:e.address,type:e.type}),Zc=async(e,t,n)=>await Promise.all(e.map(r=>new Promise(async o=>o(await dt(r,t,[...n,r.type]))))),Qc=async(e,t,n)=>await e.reduce(async(r,o)=>(r=await r,r[await dt(o.key,t,[...n,o.key])]=await dt(o.value,t,[...n,o.key]),r),Promise.resolve({})),Ft=async(e,t,n)=>{const r=await e.fields.reduce(async(s,u)=>(s=await s,s[u.name]=await dt(u.value,t,[...n,u.name]),s),Promise.resolve({})),o=e.id&&os(t,e.id);return o?await o(r):r},Vr={UInt:K,Int:K,UInt8:K,Int8:K,UInt16:K,Int16:K,UInt32:K,Int32:K,UInt64:K,Int64:K,UInt128:K,Int128:K,UInt256:K,Int256:K,Word8:K,Word16:K,Word32:K,Word64:K,UFix64:K,Fix64:K,String:K,Character:K,Bool:K,Address:K,Void:Kc,Optional:Jc,Reference:Xc,Array:Zc,Dictionary:Qc,Event:Ft,Resource:Ft,Struct:Ft,Enum:Ft,Type:Wc,Path:Vc,Capability:xc},os=(e,t)=>{const n=Object.keys(e).find(r=>/^\/.*\/$/.test(r)?new RegExp(r.substring(1,r.length-1)).test(t):r===t);return t&&n&&e[n]},dt=async(e,t,n)=>{let r=os(t,e.type);if(!r)throw new Error(`Undefined Decoder Error: ${e.type}@${n.join(".")}`);return await r(e.value,t,n)},ln=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const o={...Object.keys(Vr).filter(s=>!Object.keys(t).find(u=>new RegExp(u).test(s))).reduce((s,u)=>(s[u]=Vr[u],s),t),...t};return dt(e,o,n)},fr=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.encodedData?ln(e.encodedData,t):e.transactionStatus?{...e.transactionStatus,events:await Promise.all(e.transactionStatus.events.map(async function(r){return{type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await ln(r.payload,t)}}))}:e.transaction?e.transaction:e.events?await Promise.all(e.events.map(async function(r){return{blockId:r.blockId,blockHeight:r.blockHeight,blockTimestamp:r.blockTimestamp,type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await ln(r.payload,t)}})):e.account?e.account:e.block?e.block:e.blockHeader?e.blockHeader:e.latestBlock?(Yc(),e.latestBlock):e.transactionId?e.transactionId:e.collection?e.collection:e.networkParameters?{chainId:{"flow-testnet":"testnet","flow-mainnet":"mainnet","flow-emulator":"local"}[e.networkParameters.chainId]}:null},xr=e=>typeof e=="function",Jr=e=>typeof e=="string",el=()=>/\b(0x\w+)\b/g;function Xr(e){return el().test(e)}const as=()=>/import\s+"(\w+)"/g;function Zr(e){return as().test(e)}function tl(e){return e.matchAll(as())}async function nl(e){if(!Ge(e)&&!cr(e))return e;var t=Qt(e,"ix.cadence");if(v(xr(t)||Jr(t),"Cadence needs to be a function or a string."),xr(t)&&(t=await t({})),v(Jr(t),"Cadence needs to be a string at this point."),v(!Xr(t)||!Zr(t),"Both account identifier and contract identifier syntax not simultaneously supported."),Xr(t)&&(t=await T().where(/^0x/).then(n=>Object.entries(n).reduce((r,o)=>{let[s,u]=o;const c=new RegExp("(\\b"+s+"\\b)","g");return r.replace(c,u)},t))),Zr(t))for(const[n,r]of tl(t)){const o=await T().get(`system.contracts.${r}`);o?t=t.replace(n,`import ${r} from ${ue(o)}`):oe({title:"Contract Placeholder not found",message:`Cannot find a value for contract placeholder ${r}. Please add to your flow.json or explicitly add it to the config 'contracts.*' namespace.`,level:re.warn})}return e.message.cadence=t,e}const In=e=>typeof e=="function";function rl(e){if(v(typeof e.xform!=null,`No type specified for argument: ${e.value}`),In(e.xform))return e.xform(e.value);if(In(e.xform.asArgument))return e.xform.asArgument(e.value);v(!1,"Invalid Argument",e)}async function ss(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;if(v(t>0,`Argument Resolve Recursion Limit Exceeded for Arg: ${e.tempId}`),In(e.resolveArgument)){const n=await e.resolveArgument();return ss(n,t-1)}else return e}async function ol(e){if(Ge(e)||cr(e))for(let[t,n]of Object.entries(e.arguments)){const r=await ss(n);e.arguments[t].asArgument=rl(r)}return e}const al=e=>us(cs(ls(e))),sl=e=>us(cs(pl(e))),il=(e,t)=>j.Buffer.from(e.padEnd(t*2,0),"hex"),is=(e,t)=>j.Buffer.from(e.padStart(t*2,0),"hex"),ul=il(j.Buffer.from("FLOW-V0.0-transaction").toString("hex"),32).toString("hex"),us=e=>ul+e,dn=e=>is(e,8),cl=e=>is(e,32),ll=e=>j.Buffer.from(JSON.stringify(e),"utf8"),dl=e=>j.Buffer.from(e,"utf8"),fl=e=>j.Buffer.from(e,"hex"),cs=e=>Dn(e).toString("hex"),ls=e=>(ml(e),[dl(e.cadence),e.arguments.map(ll),cl(e.refBlock),e.computeLimit,dn(J(e.proposalKey.address)),e.proposalKey.keyId,e.proposalKey.sequenceNum,dn(J(e.payer)),e.authorizers.map(t=>dn(J(t)))]),pl=e=>(yl(e),[ls(e),gl(e)]),gl=e=>{const t=hl(e);return e.payloadSigs.map(n=>({signerIndex:t.get(n.address),keyId:n.keyId,sig:n.sig})).sort((n,r)=>{if(n.signerIndex>r.signerIndex)return 1;if(n.signerIndex<r.signerIndex)return-1;if(n.keyId>r.keyId)return 1;if(n.keyId<r.keyId)return-1}).map(n=>[n.signerIndex,n.keyId,fl(n.sig)])},hl=e=>{const t=new Map;let n=0;const r=o=>{t.has(o)||(t.set(o,n),n++)};return r(e.proposalKey.address),r(e.payer),e.authorizers.forEach(r),t},ml=e=>{wl.forEach(t=>Yt(e,t)),El.forEach(t=>Yt(e.proposalKey,t,"proposalKey"))},yl=e=>{bl.forEach(t=>Yt(e,t)),e.payloadSigs.forEach((t,n)=>{Sl.forEach(r=>Yt(t,r,"payloadSigs",n))})},zt=e=>typeof e=="number",it=e=>typeof e=="string",ds=e=>e!==null&&typeof e=="object",An=e=>ds(e)&&e instanceof Array,wl=[{name:"cadence",check:it},{name:"arguments",check:An},{name:"refBlock",check:it,defaultVal:"0"},{name:"computeLimit",check:zt},{name:"proposalKey",check:ds},{name:"payer",check:it},{name:"authorizers",check:An}],El=[{name:"address",check:it},{name:"keyId",check:zt},{name:"sequenceNum",check:zt}],bl=[{name:"payloadSigs",check:An}],Sl=[{name:"address",check:it},{name:"keyId",check:zt},{name:"sig",check:it}],Yt=(e,t,n,r)=>{const{name:o,check:s,defaultVal:u}=t;if(e[o]==null&&u!=null&&(e[o]=u),e[o]==null)throw vl(o,n,r);if(!s(e[o]))throw Rl(o,n,r)},fs=(e,t,n)=>t?n==null?`${t}.${e}`:`${t}.${n}.${e}`:e,vl=(e,t,n)=>new Error(`Missing field ${fs(e,t,n)}`),Rl=(e,t,n)=>new Error(`Invalid field ${fs(e,t,n)}`);function ps(e){let t=new Set(e.authorizations);return t.add(e.proposer),Array.isArray(e.payer)?e.payer.forEach(n=>t.delete(n)):t.delete(e.payer),Array.from(t)}function gs(e){let t=new Set(Array.isArray(e.payer)?e.payer:[e.payer]);return Array.from(t)}const pr=e=>{const t=()=>{const o=e.authorizations.map(s=>ue(e.accounts[s].addr)).reduce((s,u)=>s.find(c=>c===u)?s:[...s,u],[]);return o[0]?o:[]},n=()=>ps(e).map(o=>({address:ue(e.accounts[o].addr),keyId:e.accounts[o].keyId,sig:e.accounts[o].signature})),r=()=>gs(e).map(o=>({address:ue(e.accounts[o].addr),keyId:e.accounts[o].keyId,sig:e.accounts[o].signature}));return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(o=>e.arguments[o].asArgument),proposalKey:{address:ue(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum},payer:ue(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),authorizers:t(),payloadSigs:n(),envelopeSigs:r()}},Qr=e=>`${ue(e.addr)}-${e.keyId}`,Il=e=>typeof e=="function";function Al(e,t){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map(n=>t.arguments[n].asArgument),data:{},interaction:t,voucher:pr(t)}}catch(n){throw console.error("buildPreSignable",n),n}}async function Cn(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:3;v(r,"Account Resolve Recursion Limit Exceeded",{ix:e,accounts:t});let o=[];for(let u of t){let c=u.resolve;u.resolve=null;var s=n||u;if(Il(c)&&(u=await c(u,Al(u,e))),Array.isArray(u))await Cn(e,u,s,r-1);else{if(u.addr&&(u.addr=J(u.addr)),u.addr!=null&&u.keyId!=null&&(u.tempId=Qr(u)),e.accounts[u.tempId]=e.accounts[u.tempId]||u,e.accounts[u.tempId].role.proposer=e.accounts[u.tempId].role.proposer||u.role.proposer,e.accounts[u.tempId].role.payer=e.accounts[u.tempId].role.payer||u.role.payer,e.accounts[u.tempId].role.authorizer=e.accounts[u.tempId].role.authorizer||u.role.authorizer,e.accounts[u.tempId].role.proposer&&e.proposer===s.tempId&&(e.proposer=u.tempId),e.accounts[u.tempId].role.payer&&(Array.isArray(e.payer)?e.payer=Array.from(new Set([...e.payer,u.tempId].map(p=>p===s.tempId?u.tempId:p))):e.payer=Array.from(new Set([e.payer,u.tempId].map(p=>p===s.tempId?u.tempId:p))),e.payer.length>1)){const p=[],f=[];if(e.payer=e.payer.reduce((g,y)=>{const{addr:b}=e.accounts[y],I=Qr(e.accounts[y]);return f.push(b),p.includes(I)?g:(p.push(I),[...g,y])},[]),Array.from(new Set(f)).length>1)throw new Error("Payer can not be different accounts")}e.accounts[u.tempId].role.authorizer&&(n?o=Array.from(new Set([...o,u.tempId])):e.authorizations=e.authorizations.map(p=>p===s.tempId?u.tempId:p))}s.tempId!=u.tempId&&delete e.accounts[s.tempId]}n&&(e.authorizations=e.authorizations.map(u=>u===n.tempId?o:u).reduce((u,c)=>Array.isArray(c)?[...u,...c]:[...u,c],[]))}async function Cl(e){if(Ge(e)){Array.isArray(e.payer)||oe.deprecate({pkg:"FCL",subject:'"ix.payer" must be an array. Support for ix.payer as a singular',message:"See changelog for more info."});try{await Cn(e,Object.values(e.accounts)),await Cn(e,Object.values(e.accounts))}catch(t){throw console.error(`=== SAD PANDA ===

`,t,`

=== SAD PANDA ===`),t}}return e}async function Tl(e){if(Ge(e))try{let t=ps(e);const n=al(to(e));await Promise.all(t.map(eo(e,n)));let r=gs(e);const o=sl({...to(e),payloadSigs:t.map(s=>({address:e.accounts[s].addr,keyId:e.accounts[s].keyId,sig:e.accounts[s].signature}))});await Promise.all(r.map(eo(e,o)))}catch(t){throw console.error("Signatures",t,{ix:e}),t}return e}function eo(e,t){return async function(r){const o=e.accounts[r];if(o.signature!=null)return;const{signature:s}=await o.signingFunction(kl(o,t,e));e.accounts[r].signature=s}}function kl(e,t,n){try{return{f_type:"Signable",f_vsn:"1.0.1",message:t,addr:J(e.addr),keyId:e.keyId,roles:e.role,cadence:n.message.cadence,args:n.message.arguments.map(r=>n.arguments[r].asArgument),data:{},interaction:n,voucher:pr(n)}}catch(r){throw console.error("buildSignable",r),r}}function to(e){const t=J((Array.isArray(e.payer)?e.accounts[e.payer[0]]:e.accounts[e.payer]).addr);return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(n=>e.arguments[n].asArgument),proposalKey:{address:J(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum},payer:t,authorizers:e.authorizations.map(n=>J(e.accounts[n].addr)).reduce((n,r)=>n.find(o=>o===r)?n:[...n,r],[])}}async function $l(e){const t=Qt(e,"ix.validators",[]);return Ae(e,t.map(n=>r=>n(r,{Ok:Ie,Bad:ur})))}async function Pl(e){for(let t of Object.keys(e.accounts))e.accounts[t].addr=J(e.accounts[t].addr);return e}async function Bl(e){const t=Qt(e,"ix.voucher-intercept");return lt(t)&&await t(pr(e)),e}const Fl=100;async function Nl(e){return Ge(e)&&(e.message.computeLimit=e.message.computeLimit||await T.get("fcl.limit"),e.message.computeLimit||(oe.deprecate({pkg:"FCL/SDK",subject:"The built-in default compute limit (DEFAULT_COMPUTE_LIMIT=10)",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0009-deprecate-default-compute-limit"}),e.message.computeLimit=Fl)),e}const _l=e=>e,Je=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_l;return async n=>{const r=s=>[`
Accounts:`,{proposer:s.proposer,authorizations:s.authorizations,payer:s.payer},`

Details:`,s.accounts].filter(Boolean),o=function(){for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];console.log(`debug[${e}] ---
`,...u,`


---`)};return await T.get(`debug.${e}`)&&await t(n,o,r),n}},Ol=Ae([nl,Je("cadence",(e,t)=>t(e.message.cadence)),Nl,Je("compute limit",(e,t)=>t(e.message.computeLimit)),ol,Je("arguments",(e,t)=>t(e.message.arguments,e.message)),Cl,Je("accounts",(e,t,n)=>t(...n(e))),Dl,Ll,Tl,Je("signatures",(e,t,n)=>t(...n(e))),Pl,$l,Bl,Je("resolved",(e,t)=>t(e))]);async function Dl(e){if(Ge(e)&&e.message.refBlock==null){const t=await T().get("accessNode.api"),n=await T.first(["sdk.transport","sdk.send"],Mn);v(n,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),e.message.refBlock=(await n(rs([Hc()]),{config:T,response:dr,Buffer:j.Buffer,ix:lr},{node:t}).then(fr)).id}return e}async function Ll(e){if(Ge(e)){var t=Object.values(e.accounts).find(n=>n.role.proposer);if(v(t,"Transactions require a proposer"),t.sequenceNum==null){const n=await T().get("accessNode.api"),r=await T.first(["sdk.transport","sdk.send"],Mn);v(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),e.accounts[t.tempId].sequenceNum=await r(await rs([zc(t.addr)]),{config:T,response:dr,Buffer:j.Buffer,ix:lr},{node:n}).then(fr).then(o=>o.keys).then(o=>o.find(s=>s.index===t.keyId)).then(o=>o.sequenceNumber)}}return e}function Te(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){const[o,s]=t;return Te((u,c)=>{let{Ok:p,Bad:f}=c;return o?p(u):f(u,s)})}const[r]=t;return o=>r(o,{Ok:Ie,Bad:ur})}const hs=async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await T.first(["sdk.transport","sdk.send"],t.send||Mn);Te(n,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21");const r=await T.first(["sdk.resolve"],t.resolve||Ol);return t.node=t.node||await T().get("accessNode.api"),Array.isArray(e)&&(e=Ae(ar(),e)),n(await r(e),{config:T,response:dr,ix:lr,Buffer:j.Buffer},t)};async function ms(e){const t=await T().where(/^decoder\./),n=Object.entries(t).map(r=>{let[o,s]=r;return o=`/${o.replace(/^decoder\./,"")}$/`,[o,s]});return fr(e,Object.fromEntries(n))}function Ul(){return Ae([es,e=>Ie(e)])}function Gl(e){return t=>(t.message.computeLimit=e,t)}function Ml(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ae(e.map(Ja))}function ys(e,t){return{value:e,xform:t}}function ql(){return Ae([Xa,ns("ix.cadence",cc(...arguments))])}var jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let no;var Hl=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:jl):e=>(no||(no=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0));const zl=()=>{const e=[];var t;return{async deliver(n){e.push(n),t&&(t(e.shift()),t=void 0)},receive(){return new Promise(function(r){const o=e.shift();if(o)return r(o);t=r})}}},ro="INIT",ws="SUBSCRIBE",Tn="UNSUBSCRIBE",Yl="UPDATED",Kl="EXIT",oo="TERMINATE",M=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||typeof window=="object"&&window.window===window&&window;M.FCL_REGISTRY=M.FCL_REGISTRY==null?{}:M.FCL_REGISTRY;var Wl=0;const Vl=5e3,Ee=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return new Promise((o,s)=>{const u=r.expectReply||!1,c=r.timeout!=null?r.timeout:Vl;u&&c&&setTimeout(()=>s(new Error(`Timeout: ${c}ms passed without a response.`)),c);const p={to:e,from:r.from,tag:t,data:n,timeout:c,reply:o,reject:s};try{M.FCL_REGISTRY[e]&&M.FCL_REGISTRY[e].mailbox.deliver(p),u||o(!0)}catch(f){console.error("FCL.Actor -- Could Not Deliver Message",p,M.FCL_REGISTRY[e],f)}})},xl=e=>{delete M.FCL_REGISTRY[e]},Jl=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return async t=>{typeof e[ro]=="function"&&await e[ro](t);e:for(;;){const n=await t.receive();try{if(n.tag===Kl){typeof e[oo]=="function"&&await e[oo](t,n,n.data||{});break e}await e[n.tag](t,n,n.data||{})}catch(r){console.error(`${t.self()} Error`,n,r)}finally{continue e}}}},gr=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(t==null&&(t=++Wl),M.FCL_REGISTRY[t]!=null)return t;M.FCL_REGISTRY[t]={addr:t,mailbox:zl(),subs:new Set,kvs:{},error:null};const n={self:()=>t,receive:()=>M.FCL_REGISTRY[t].mailbox.receive(),send:function(r,o,s){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return u.from=t,Ee(r,o,s,u)},sendSelf:(r,o,s)=>{M.FCL_REGISTRY[t]&&Ee(t,r,o,s)},broadcast:function(r,o){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s.from=t;for(let u of M.FCL_REGISTRY[t].subs)Ee(u,r,o,s)},subscribe:r=>r!=null&&M.FCL_REGISTRY[t].subs.add(r),unsubscribe:r=>r!=null&&M.FCL_REGISTRY[t].subs.delete(r),subscriberCount:()=>M.FCL_REGISTRY[t].subs.size,hasSubs:()=>!!M.FCL_REGISTRY[t].subs.size,put:(r,o)=>{r!=null&&(M.FCL_REGISTRY[t].kvs[r]=o)},get:(r,o)=>{const s=M.FCL_REGISTRY[t].kvs[r];return s??o},delete:r=>{delete M.FCL_REGISTRY[t].kvs[r]},update:(r,o)=>{r!=null&&(M.FCL_REGISTRY[t].kvs[r]=o(M.FCL_REGISTRY[t].kvs[r]))},keys:()=>Object.keys(M.FCL_REGISTRY[t].kvs),all:()=>M.FCL_REGISTRY[t].kvs,where:r=>Object.keys(M.FCL_REGISTRY[t].kvs).reduce((o,s)=>r.test(s)?{...o,[s]:M.FCL_REGISTRY[t].kvs[s]}:o,{}),merge:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(r).forEach(o=>M.FCL_REGISTRY[t].kvs[o]=r[o])},fatalError:r=>{M.FCL_REGISTRY[t].error=r;for(let o of M.FCL_REGISTRY[t].subs)Ee(o,Yl)}};return typeof e=="object"&&(e=Jl(e)),Hl(async()=>{await e(n),xl(t)}),t};function Xl(e,t,n){t(e);const r="@EXIT",o=gr(async s=>{for(s.send(e,ws);;){const u=await s.receive(),c=M.FCL_REGISTRY[e].error;if(u.tag===r){s.send(e,Tn);return}if(c){n(null,c),s.send(e,Tn);return}n(u.data,null)}});return()=>Ee(o,r)}function ao(e,t){if(!e){const s=new Error(`INVARIANT ${t}`);s.stack=s.stack.split(`
`).filter(u=>!/at invariant/.test(u)).join(`
`);for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];throw console.error(`

---

`,s,`

`,...r,`

---

`),s}}const so=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((o,s)=>s(o),r)},Zl=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((o,s)=>({...o,...s(r)}),{})},Gt=e=>e&&typeof e=="object"&&!Array.isArray(e),kn=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const o=n.shift();if(Gt(e)&&Gt(o))for(const s in o)Gt(o[s])?(e[s]||Object.assign(e,{[s]:{}}),kn(e[s],o[s])):Object.assign(e,{[s]:o[s]});return kn(e,...n)},Ql=e=>Array.isArray(e)?kn({},...e):e,ed=e=>e.contracts?e.contracts:{},td=e=>t=>Object.entries(t).reduce((n,r)=>{let[o,s]=r;const u=s?.aliases?.[e];return u&&(n[o]=u),n},{}),nd=e=>t=>{let{deployments:n={},accounts:r={}}=t;const o=n?.[e];return o?Object.entries(o).reduce((s,u)=>{let[c,p]=u;const f=r[c]?.address;return f?p.reduce((h,g)=>({...h,[g]:f}),{}):s},{}):{}},rd=(e,t)=>so(Ql,Zl(nd(t),so(ed,td(t))))(e),od=e=>typeof e!="string"?!1:/^[0-9A-Fa-f]+$/.test(e),io=e=>Object.entries(e?.accounts).reduce((t,n)=>{let[r,o]=n;return t?!0:o?.hasOwnProperty("key")&&od(o?.key)},!1),ad=e=>Gt(e)?io(e):e.some(io),sd=e=>e?.toLowerCase()==="local"?"emulator":e?.toLowerCase(),Ne="config",Es="PUT_CONFIG",bs="GET_CONFIG",Ss="GET_ALL_CONFIG",vs="UPDATE_CONFIG",Rs="DELETE_CONFIG",Is="CLEAR_CONFIG",As="WHERE_CONFIG",Et="CONFIG/UPDATED",Cs=e=>e,Ts={[Es]:(e,t,n)=>{let{key:r,value:o}=n;if(r==null)throw new Error("Missing 'key' for config/put.");e.put(r,o),e.broadcast(Et,{...e.all()})},[bs]:(e,t,n)=>{let{key:r,fallback:o}=n;if(r==null)throw new Error("Missing 'key' for config/get");t.reply(e.get(r,o))},[Ss]:(e,t)=>{t.reply({...e.all()})},[vs]:(e,t,n)=>{let{key:r,fn:o}=n;if(r==null)throw new Error("Missing 'key' for config/update");e.update(r,o||Cs),e.broadcast(Et,{...e.all()})},[Rs]:(e,t,n)=>{let{key:r}=n;if(r==null)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(Et,{...e.all()})},[Is]:(e,t)=>{let n=Object.keys(e.all());for(let r of n)e.delete(r);e.broadcast(Et,{...e.all()})},[As]:(e,t,n)=>{let{pattern:r}=n;if(r==null)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(r))},[ws]:(e,t)=>{e.subscribe(t.from),e.send(t.from,Et,{...e.all()})},[Tn]:(e,t)=>{e.unsubscribe(t.from)}};gr(Ts,Ne);function At(e,t){return Ee(Ne,Es,{key:e,value:t}),de()}function ut(e,t){return Ee(Ne,bs,{key:e,fallback:t},{expectReply:!0,timeout:10})}async function hr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return t;const[n,...r]=e,o=await ut(n);return o??hr(r,t)}function Kt(){return Ee(Ne,Ss,null,{expectReply:!0,timeout:10})}function ks(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cs;return Ee(Ne,vs,{key:e,fn:t}),de()}function $s(e){return Ee(Ne,Rs,{key:e}),de()}function Ps(e){return Ee(Ne,As,{pattern:e},{expectReply:!0,timeout:10})}function Bs(e){return Xl(Ne,()=>gr(Ts,Ne),e)}function id(){return Ee(Ne,Is)}function uo(e){return id().then(de(e))}async function Fs(e){const t=await ut("flow.network"),n=sd(t),{flowJSON:r}=e;if(ao(!!r,"config.load -- 'flowJSON' must be defined"),ao(n,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),ad(r)){const o=n==="emulator";if(je({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:o?$e.warn:$e.error}),!o)return}for(const[o,s]of Object.entries(rd(r,n))){const u=`0x${o}`,c=await ut(u);c&&c!==s?je({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:$e.warn}):At(u,s);const p=`system.contracts.${o}`,f=await ut(p);f&&f!==s?je({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:$e.warn}):At(p,s)}}function de(e){return e!=null&&typeof e=="object"&&Object.keys(e).map(t=>At(t,e[t])),{put:At,get:ut,all:Kt,first:hr,update:ks,delete:$s,where:Ps,subscribe:Bs,overload:Ns,load:Fs}}de.put=At;de.get=ut;de.all=Kt;de.first=hr;de.update=ks;de.delete=$s;de.where=Ps;de.subscribe=Bs;de.overload=Ns;de.load=Fs;const ud=e=>e;function Ns(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ud;return new Promise(async(n,r)=>{const o=await Kt();try{de(e);var s=await t(await Kt());await uo(o),n(s)}catch(u){await uo(o),r(u)}})}const $e=Object.freeze({debug:5,info:4,log:3,warn:2,error:1}),cd=e=>{let{title:t,message:n}=e;return[`
    %c${t}
    ============================

    ${n}

    ============================
    `.replace(/\n[^\S\r\n]+/g,`
`).trim(),,"font-weight:bold;font-family:monospace;"]},je=async e=>{let{title:t,message:n,level:r,always:o=!1}=e;const s=await de.get("logger.level",$e.warn);if(!o&&s<r)return;const u=cd({title:t,message:n});switch(r){case $e.debug:console.debug(...u);break;case $e.info:console.info(...u);break;case $e.warn:console.warn(...u);break;case $e.error:console.error(...u);break;default:console.log(...u)}};je.deprecate=e=>{let{pkg:t,subject:n,transition:r,level:o=$e.warn,message:s="",callback:u=null}=e;const c=f=>f.charAt(0).toUpperCase()+f.slice(1),p=()=>je({title:`${t?t+" ":""}Deprecation Notice`,message:`
      ${n?`${c(n)} is deprecated and will cease to work in future releases${t?" of "+t:""}.`:""}${s?`
`+s:""}${r?`
You can learn more (including a guide on common transition paths) here: ${r}`:""}
    `.trim(),level:o});return typeof u=="function"?async function(){return await p(),await u(...arguments)}:p()};const D=(e,t,n)=>({label:e,asArgument:t,asInjection:n}),He=e=>Array.isArray(e),Ye=e=>typeof e=="object",_s=e=>e==null,ld=e=>typeof e=="boolean",X=e=>typeof e=="number",ae=e=>Number.isInteger(e),H=e=>typeof e=="string",_=e=>{throw new Error("Type Error: "+e)},se=e=>{je.deprecate({pkg:"@onflow/types",subject:`Passing in Number as value for ${e}`,message:`Going forward, use String as value for ${e}.`,transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0002-[U]Int*-and-Word*-as-Number"})},dd=D("Identity",e=>e,e=>e),fd=D("UInt",e=>{if(X(e)&&ae(e))return se("UInt"),{type:"UInt",value:e.toString()};if(H(e))return{type:"UInt",value:e};_("Expected Positive Integer for type Unsigned Int")},e=>e),pd=D("Int",e=>{if(X(e)&&ae(e))return se("Int"),{type:"Int",value:e.toString()};if(H(e))return{type:"Int",value:e};_("Expected Integer for type Int")},e=>e),gd=D("UInt8",e=>{if(X(e)&&ae(e))return se("UInt8"),{type:"UInt8",value:e.toString()};if(H(e))return{type:"UInt8",value:e};_("Expected integer for UInt8")},e=>e),hd=D("Int8",e=>{if(X(e)&&ae(e))return se("Int8"),{type:"Int8",value:e.toString()};if(H(e))return{type:"Int8",value:e};_("Expected positive integer for Int8")},e=>e),md=D("UInt16",e=>{if(X(e)&&ae(e))return se("UInt16"),{type:"UInt16",value:e.toString()};if(H(e))return{type:"UInt16",value:e};_("Expected integer for UInt16")},e=>e),yd=D("Int16",e=>{if(X(e)&&ae(e))return se("Int16"),{type:"Int16",value:e.toString()};if(H(e))return{type:"Int16",value:e};_("Expected positive integer for Int16")},e=>e),wd=D("UInt32",e=>{if(X(e)&&ae(e))return se("UInt32"),{type:"UInt32",value:e.toString()};if(H(e))return{type:"UInt32",value:e};_("Expected integer for UInt32")},e=>e),Ed=D("Int32",e=>{if(X(e)&&ae(e))return se("Int32"),{type:"Int32",value:e.toString()};if(H(e))return{type:"Int32",value:e};_("Expected positive integer for Int32")},e=>e),bd=D("UInt64",e=>{if(X(e)&&ae(e))return se("UInt64"),{type:"UInt64",value:e.toString()};if(H(e))return{type:"UInt64",value:e};_("Expected integer for UInt64")},e=>e),Sd=D("Int64",e=>{if(X(e)&&ae(e))return se("Int64"),{type:"Int64",value:e.toString()};if(H(e))return{type:"Int64",value:e};_("Expected positive integer for Int64")},e=>e),vd=D("UInt128",e=>{if(X(e)&&ae(e))return se("UInt128"),{type:"UInt128",value:e.toString()};if(H(e))return{type:"UInt128",value:e};_("Expected integer for UInt128")},e=>e),Rd=D("Int128",e=>{if(X(e)&&ae(e))return se("Int128"),{type:"Int128",value:e.toString()};if(H(e))return{type:"Int128",value:e};_("Expected positive integer for Int128")},e=>e),Id=D("UInt256",e=>{if(X(e)&&ae(e))return se("UInt256"),{type:"UInt256",value:e.toString()};if(H(e))return{type:"UInt256",value:e};_("Expected integer for UInt256")},e=>e),Ad=D("Int256",e=>{if(X(e)&&ae(e))return se("Int256"),{type:"Int256",value:e.toString()};if(H(e))return{type:"Int256",value:e};_("Expected integer for Int256")},e=>e),Cd=D("Word8",e=>{if(X(e)&&ae(e))return se("Word8"),{type:"Word8",value:e.toString()};if(H(e))return{type:"Word8",value:e};_("Expected positive number for Word8")},e=>e),Td=D("Word16",e=>{if(X(e)&&ae(e))return se("Word16"),{type:"Word16",value:e.toString()};if(H(e))return{type:"Word16",value:e};_("Expected positive number for Word16")},e=>e),kd=D("Word32",e=>{if(X(e)&&ae(e))return se("Word32"),{type:"Word32",value:e.toString()};if(H(e))return{type:"Word32",value:e};_("Expected positive number for Word32")},e=>e),$d=D("Word64",e=>{if(X(e)&&ae(e))return se("Word64"),{type:"Word64",value:e.toString()};if(H(e))return{type:"Word64",value:e};_("Expected positive number for Word64")},e=>e),Os=()=>{je.deprecate({subject:"Passing in Numbers as values for Fix64 and UFix64 types",pkg:"@onflow/types",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0001-[U]Fix64-as-Number"})},Pd=D("UFix64",e=>{if(H(e)){const t=e.split(".");return t.length!==2&&_(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`),(t[1].length==0||t[1].length>8)&&_(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`),t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"UFix64",value:e}}else if(X(e))return Os(),{type:"UFix64",value:e.toString()};_("Expected String for UFix64")},e=>e),Bd=D("Fix64",e=>{if(H(e)){const t=e.split(".");return t.length!==2&&_(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`),(t[1].length==0||t[1].length>8)&&_(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`),t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"Fix64",value:e}}else if(X(e))return Os(),{type:"Fix64",value:e.toString()};_("Expected String for Fix64")},e=>e),Fd=D("String",e=>{if(H(e))return{type:"String",value:e};_("Expected String for type String")},e=>e),Nd=D("Character",e=>{if(H(e))return{type:"Character",value:e};_("Expected Character for type Character")},e=>e),_d=D("Bool",e=>{if(ld(e))return{type:"Bool",value:e};_("Expected Boolean for type Bool")},e=>e),Ds=D("Address",e=>{if(H(e))return{type:"Address",value:e};_("Expected Address for type Address")},e=>e),Od=D("Void",e=>{if(!e||_s(e))return{type:"Void"};_("Expected Void for type Void")},e=>e),Dd=e=>D("Optional",t=>({type:"Optional",value:_s(t)?null:e.asArgument(t)}),t=>t),Ld=D("Reference",e=>{if(Ye(e))return{type:"Reference",value:e};_("Expected Object for type Reference")},e=>e),co=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D("Array",t=>({type:"Array",value:He(e)?e.map((n,r)=>n.asArgument(t[r])):t.map(n=>e.asArgument(n))}),t=>t)},Ud=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D("Dictionary",t=>{if(Ye(t))return{type:"Dictionary",value:He(e)?e.map((n,r)=>({key:n.key.asArgument(t[r].key),value:n.value.asArgument(t[r].value)})):He(t)?t.map(n=>({key:e.key.asArgument(n.key),value:e.value.asArgument(n.value)})):[{key:e.key.asArgument(t.key),value:e.value.asArgument(t.value)}]};_("Expected Object for type Dictionary")},t=>t)},Gd=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return D("Event",n=>{if(Ye(n))return{type:"Event",value:{id:e,fields:He(t)?t.map((r,o)=>({name:n.fields[o].name,value:r.value.asArgument(n.fields[o].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}};_("Expected Object for type Event")},n=>n)},Md=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return D("Resource",n=>{if(Ye(n))return{type:"Resource",value:{id:e,fields:He(t)?t.map((r,o)=>({name:n.fields[o].name,value:r.value.asArgument(n.fields[o].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}};_("Expected Object for type Resource")},n=>n)},qd=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return D("Struct",n=>{if(Ye(n))return{type:"Struct",value:{id:e,fields:He(t)?t.map((r,o)=>({name:n.fields[o].name,value:r.value.asArgument(n.fields[o].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}};_("Expected Object for type Struct")},n=>n)},jd=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return D("Enum",n=>{if(Ye(n))return{type:"Enum",value:{id:e,fields:He(t)?t.map((r,o)=>({name:n.fields[o].name,value:r.value.asArgument(n.fields[o].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}};_("Expected Object for type Enum")},n=>n)},Hd=D("Path",e=>{if(Ye(e))return H(e.domain)||_(`Expected a string for the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`),e.domain==="storage"||e.domain==="private"||e.domain==="public"||_(`Expected either "storage", "private" or "public" as the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`),H(e.identifier)||_(`Expected a string for the Path identifier but found ${e.identifier}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`),{type:"Path",value:{domain:e.domain,identifier:e.identifier}};_("Expected Object for type Path")},e=>e),zd=Object.freeze(Object.defineProperty({__proto__:null,Address:Ds,Array:co,Bool:_d,Character:Nd,Dictionary:Ud,Enum:jd,Event:Gd,Fix64:Bd,Identity:dd,Int:pd,Int128:Rd,Int16:yd,Int256:Ad,Int32:Ed,Int64:Sd,Int8:hd,Optional:Dd,Path:Hd,Reference:Ld,Resource:Md,String:Fd,Struct:qd,UFix64:Pd,UInt:fd,UInt128:vd,UInt16:md,UInt256:Id,UInt32:wd,UInt64:bd,UInt8:gd,Void:Od,Word16:Td,Word32:kd,Word64:$d,Word8:Cd,_Array:co},Symbol.toStringTag,{value:"Module"}));var Ls="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",Yd=Ls.length;function mr(){for(var e="",t=32;t--;)e+=Ls[Math.random()*Yd|0];return e}const Oe="1.6.0",yr=e=>t=>typeof t===e,qe=e=>e!=null,Kd=yr("object"),ct=yr("string"),Us=yr("function");function Wd(e){return Us(e)?e(ys,zd):[]}async function lo(e){let{url:t}=e;v(typeof t<"u","retrieve({ url }) -- url must be defined");let n;try{n=await Jo(t)}catch{throw new Error("httpDocumentResolver Error: Failed to retrieve document.")}return n.ok?await n.json():null}const fo=new Map([["http",lo],["https",lo]]);async function Vd(e){let{url:t}=e;v(typeof t<"u","retrieve({ url }) -- url must be defined"),v(typeof t=="string","retrieve({ url }) -- url must be a string");const n=await T().where(/^document\.resolver\./);Object.keys(n).map(c=>{const p=n[c],f=c.replace(/^document\.resolver\./,"");fo.set(f,p)});const r=/^(.*):\/\/([A-Za-z0-9\-\.]+)(:[0-9]+)?(.*)$/.exec(t);v(r,"Failed to parse URL");const o=r[1];v(r,"Failed to parse URL protocol");const s=fo.get(o);return v(s,`No resolver found for protcol=${o}`),await s({url:t})}function Gs(e){if(e==null)return null;switch(e.f_version){case"1.0.0":return e;default:throw new Error("normalizeInteractionTemplate Error: Invalid InteractionTemplate")}}function xd(e){let{network:t,template:n}=e;switch(Te(t!=null,"deriveCadenceByNetwork({ network }) -- network must be defined"),Te(typeof t=="string","deriveCadenceByNetwork({ network }) -- network must be a string"),Te(n!=null,"generateDependencyPin({ template }) -- template must be defined"),Te(typeof n=="object","generateDependencyPin({ template }) -- template must be an object"),Te(n.f_type==="InteractionTemplate","generateDependencyPin({ template }) -- template must be an InteractionTemplate"),n=Gs(n),n.f_version){case"1.0.0":return Object.keys(n?.data?.dependencies).map(o=>{let s=Object.values(n?.data?.dependencies?.[o]);Te(s,`deriveCadenceByNetwork -- Could not find contracts for dependency placeholder: ${o}`),Te(s.length===0,`deriveCadenceByNetwork -- Could not find contracts for dependency placeholder: ${o}`);let c=s[0]?.[t];return Te(c,`deriveCadenceByNetwork -- Could not find ${t} network information for dependency: ${o}`),[o,c.address]}).reduce((o,s)=>{let[u,c]=s;const p=new RegExp("(\\b"+u+"\\b)","g");return o.replace(p,c)},n.data.cadence);default:throw new Error("deriveCadenceByNetwork Error: Unsupported template version")}}async function Jd(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(await hs([Ul()],e).then(ms)).chainId}let Xe={},po=!1;async function $t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=await T.get("flow.network"),n=await T.get("env");n&&!po&&(oe.deprecate({pkg:"FCL",subject:'Using the "env" configuration key for specifying the flow network',message:"Configuring to specify flow network is no longer required",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0001-deprecate-env-config-key"}),po=!0);const r=e.node||await T.get("accessNode.api");if(!r){if(t)return t;if(n)return n;throw new Error('Either the "accessNode.api" config key or opts.node must be set')}if(Xe[r])try{return await Xe[r]}catch{}Xe[r]||(Xe[r]=Jd(e).catch(o=>{throw Xe[r]=null,o}));try{return await Xe[r]}catch(o){if(t)return t;if(n)return n;throw new Error(`Error getting chainId from access node - are you using the correct access node endpoint.  If running locally, is your emulator up-to-date? ${o.message}`)}}function Xd(){return T.subscribe(()=>{$t({enableRequestLogging:!1}).catch(()=>{})})}function Zd(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function Qd(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function ef(){return typeof navigator<"u"&&/iPad/.test(navigator.userAgent)}function tf(){return Qd()||ef()}function nf(){return Zd()||tf()}async function rf(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=e.template,n=await $t(e),r={};switch(t.f_version){case"1.0.0":const o=Object.keys(t?.data?.dependencies);for(let s of o){let u=t?.data?.dependencies[s];const c=Object.keys(u);v(c.length>0,`FCL configureDependencies Error: No contracts found in template for placeholder=${s}`);const f=u[c[0]][n];v(f,`FCL configureDependencies Error: No dependency information for placeholder=${s} contract=${c[0]} network=${n}`),v(f?.address,`FCL configureDependencies Error: No address information for placeholder=${s} contract=${c[0]} network=${n}`),r[s]=ue(f?.address)}return r;default:throw new Error("FCL configureDependencies Error: Unsupported template version")}}async function of(e){ct(e?.template)&&(e.template=await Vd({url:e?.template}));let t={};e?.template&&(e.template=Gs(e?.template),t=await rf({template:e.template}));const n=e.cadence||xd({template:e.template,network:await $t(e)});return e.cadence=n,e.dependencies=t,e}async function af(e,t){v(qe(t),`${e}(opts) -- opts is required`),v(Kd(t),`${e}(opts) -- opts must be an object`),v(!(t.cadence&&t.template),`${e}({ template, cadence }) -- cannot pass both cadence and template`),v(qe(t.cadence||t?.template),`${e}({ cadence }) -- cadence is required`),v(ct(t.cadence)||t?.template,`${e}({ cadence }) -- cadence must be a string`),v(await T().get("accessNode.api"),`${e}(opts) -- Required value for "accessNode.api" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration`)}async function sf(e){return af("query",e)}async function Ms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return await sf(e),e=await of(e),T().overload(e.dependencies||{},async()=>hs([ql(e.cadence),Ml(Wd(e.args||[])),e.limit&&typeof e.limit=="number"&&Gl(e.limit)]).then(ms))}const he={"HTTP/RPC":"HTTP/RPC","HTTP/POST":"HTTP/POST","IFRAME/RPC":"IFRAME/RPC","POP/RPC":"POP/RPC","TAB/RPC":"TAB/RPC","EXT/RPC":"EXT/RPC","DEEPLINK/RPC":"DEEPLINK/RPC"},uf=globalThis.URL;class qs extends uf{constructor(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];super(t,n,...o)}}const ft={f_type:"Service",f_vsn:"1.0.0"},js={f_type:"Identity",f_vsn:"1.0.0"},cf={f_type:"USER",f_vsn:"1.0.0"},lf={f_type:"PollingResponse",f_vsn:"1.0.0"},df={f_type:"CompositeSignature",f_vsn:"1.0.0"},ff="USER_SIGNATURE",pf=e=>{if(e.appIdentifier){const{appIdentifier:t,address:n,nonce:r,signatures:o}=e;return v(ct(t),"verifyAccountProof({ appIdentifier }) -- appIdentifier must be a string"),v(ct(n)&&J(n).length===16,"verifyAccountProof({ address }) -- address must be a valid address"),v(/^[0-9a-f]+$/i.test(r),"nonce must be a hex string"),v(Array.isArray(o)&&o.every((s,u,c)=>s.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),v(o.map(s=>s.addr).every((s,u,c)=>s===c[0]),"User signatures to be verified must be from a single account address"),!0}else{const{message:t,address:n,compSigs:r}=e;return v(/^[0-9a-f]+$/i.test(t),"Signed message must be a hex string"),v(ct(n)&&J(n).length===16,"verifyUserSignatures({ address }) -- address must be a valid address"),v(Array.isArray(r)&&r.every((o,s,u)=>o.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),v(r.map(o=>o.addr).every((o,s,u)=>o===u[0]),"User signatures to be verified must be from a single account address"),!0}},gf=async(e,t)=>{const n=e==="ACCOUNT_PROOF"?"verifyAccountProofSignatures":"verifyUserSignatures";let r=await $t(t),o;return v(t.fclCryptoContract||r==="testnet"||r==="mainnet","${verifyFunction}({ fclCryptoContract }) -- fclCrypto contract address must be set for non-mainnet/testnet networks"),t.fclCryptoContract?o=t.fclCryptoContract:o=r==="testnet"?"0x74daa6f9c7ef24b1":"0xb4b82a1c9d21d284",`
      import FCLCrypto from ${o}

      pub fun main(
          address: Address, 
          message: String, 
          keyIndices: [Int], 
          signatures: [String]
      ): Bool {
        return FCLCrypto.${n}(address: address, message: message, keyIndices: keyIndices, signatures: signatures)
      }
    `};async function hf(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=ue(t[0].addr);pf({message:e,address:r,compSigs:t});let o=[],s=[];for(const u of t)o.push(u.signature),s.push(u.keyId.toString());return Ms({cadence:await gf(ff,n),args:(u,c)=>[u(r,c.Address),u(e,c.String),u(s,c.Array(c.Int)),u(o,c.Array(c.String))]})}oe.deprecate({pkg:"FCL",subject:"fcl.verifyUserSignatures()",message:"Please use fcl.AppUtils.verifyUserSignatures()",callback:function(t,n){return hf(t,n)}});async function go(e){return Object.fromEntries(Object.entries(await T().where(e)).map(t=>{let[n,r]=t;return[n.replace(e,""),r]}))}const Ze=()=>{throw new Error("Platform specific Core Strategies are not initialized")},mf={[he["EXT/RPC"]]:Ze,[he["HTTP/POST"]]:Ze,[he["IFRAME/RPC"]]:Ze,[he["POP/RPC"]]:Ze,[he["TAB/RPC"]]:Ze,[he["EXT/RPC"]]:Ze},yf=["discovery-service"],wf=e=>{const{services:t,serviceStrategy:n}=e;v(Array.isArray(t)&&t.length,"Array of Discovery Services is required");for(const r of t)v(qe(r.f_type)&&r.f_type==="Service","Service is required"),v(qe(r.type)&&r.type==="authn",`Service must be type authn. Received ${r.type}`),v(r.method in he||n.method===r.method,`Service method ${r.method} is not supported`);return v(qe(n),"Service strategy is required"),v(qe(n.method)&&ct(n.method),"Service strategy method is required"),v(qe(n.exec)&&Us(n.exec),"Service strategy exec function is required"),{discoveryServices:t,serviceStrategy:n}},Ef=e=>{let{coreStrategies:t}=e,n=new Set,r=new Map(Object.entries(t));const o=f=>{if(v(yf.includes(f.type),`Service Plugin type ${f.type} is not supported`),f.type==="discovery-service"){const{discoveryServices:h,serviceStrategy:g}=wf(f);s(h),r.has(g.method)?oe({title:"Add Service Plugin",message:`Service strategy for ${g.method} already exists`,level:re.warn}):r.set(g.method,g.exec)}},s=f=>n=new Set([...f]);return Object.freeze({add:o,getServices:()=>[...n],getStrategy:f=>r.get(f),getStrategies:()=>[...r.keys()]})};let Wt;const Hs=()=>typeof Wt<"u",zs=e=>{let{coreStrategies:t}=e;if(Hs())return Wt;const n=Ef({coreStrategies:t});return Wt=n,n},wr=()=>Hs()?Wt:(console.warn("Registry is not initalized, it will be initialized with stub core strategies"),zs({coreStrategies:mf})),bf=async()=>[...window?.fcl_extensions||[],...wr().getServices()];async function Sf(e){const t=await T.get("discovery.authn.include",[]),n=await T.first(["discovery.wallet.method","discovery.wallet.method.default"]),r=e?.method?e.method:n,o=e?.endpoint??await T.first(["discovery.wallet","challenge.handshake"]);return v(o,`
    If no service is passed to "authenticate," then "discovery.wallet" must be defined in fcl config.
    See: "https://docs.onflow.org/fcl/reference/api/#setting-configuration-values"
    `),{...e,type:"authn",endpoint:o,method:r,discoveryAuthnInclude:t}}var vf={},Ys={},Ks={},Ws={},Rf=function(t,n){return function(r,o){var s=o*2,u=n*2;r[s]=t[u],r[s+1]=t[u+1]}},Er=Rf;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Er);function n(s){return s&&s.__esModule?s:{default:s}}var r=function(u){for(var c=u.A,p=u.C,f=0;f<25;f+=5){for(var h=0;h<5;h++)(0,t.default)(c,f+h)(p,h);for(var g=0;g<5;g++){var y=(f+g)*2,b=(g+1)%5*2,I=(g+2)%5*2;c[y]^=~p[b]&p[I],c[y+1]^=~p[b+1]&p[I+1]}}},o=r;e.default=o})(Ws);var Vs={},xs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]),n=t;e.default=n})(xs);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(xs);function n(s){return s&&s.__esModule?s:{default:s}}var r=function(u){var c=u.A,p=u.roundIndex,f=p*2;c[0]^=t.default[f],c[1]^=t.default[f+1]},o=r;e.default=o})(Vs);var Js={},Xs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1],n=t;e.default=n})(Xs);var Zs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44],n=t;e.default=n})(Zs);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(Xs),n=o(Zs),r=o(Er);function o(c){return c&&c.__esModule?c:{default:c}}var s=function(p){var f=p.A,h=p.C,g=p.W;(0,r.default)(f,1)(g,0);for(var y=0,b=0,I=0,k=32,$=0;$<24;$++){var P=t.default[$],F=n.default[$];(0,r.default)(f,P)(h,0),y=g[0],b=g[1],k=32-F,I=F<32?0:1,g[I]=y<<F|b>>>k,g[(I+1)%2]=b<<F|y>>>k,(0,r.default)(g,0)(f,P),(0,r.default)(h,0)(g,0)}},u=s;e.default=u})(Js);var Qs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Er);function n(s){return s&&s.__esModule?s:{default:s}}var r=function(u){for(var c=u.A,p=u.C,f=u.D,h=u.W,g=0,y=0,b=0;b<5;b++){var I=b*2,k=(b+5)*2,$=(b+10)*2,P=(b+15)*2,F=(b+20)*2;p[I]=c[I]^c[k]^c[$]^c[P]^c[F],p[I+1]=c[I+1]^c[k+1]^c[$+1]^c[P+1]^c[F+1]}for(var A=0;A<5;A++){(0,t.default)(p,(A+1)%5)(h,0),g=h[0],y=h[1],h[0]=g<<1|y>>>31,h[1]=y<<1|g>>>31,f[A*2]=p[(A+4)%5*2]^h[0],f[A*2+1]=p[(A+4)%5*2+1]^h[1];for(var B=0;B<25;B+=5)c[(B+A)*2]^=f[A*2],c[(B+A)*2+1]^=f[A*2+1]}},o=r;e.default=o})(Qs);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s(Ws),n=s(Vs),r=s(Js),o=s(Qs);function s(p){return p&&p.__esModule?p:{default:p}}var u=function(){var f=new Uint32Array(10),h=new Uint32Array(10),g=new Uint32Array(2);return function(y){for(var b=0;b<24;b++)(0,o.default)({A:y,C:f,D:h,W:g}),(0,r.default)({A:y,C:f,W:g}),(0,t.default)({A:y,C:f}),(0,n.default)({A:y,roundIndex:b});f.fill(0),h.fill(0),g.fill(0)}},c=u;e.default=c})(Ks);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Vo,n=r(Ks);function r(p){return p&&p.__esModule?p:{default:p}}var o=function(f,h){for(var g=0;g<f.length;g+=8){var y=g/4;h[y]^=f[g+7]<<24|f[g+6]<<16|f[g+5]<<8|f[g+4],h[y+1]^=f[g+3]<<24|f[g+2]<<16|f[g+1]<<8|f[g]}return h},s=function(f,h){for(var g=0;g<h.length;g+=8){var y=g/4;h[g]=f[y+1],h[g+1]=f[y+1]>>>8,h[g+2]=f[y+1]>>>16,h[g+3]=f[y+1]>>>24,h[g+4]=f[y],h[g+5]=f[y]>>>8,h[g+6]=f[y]>>>16,h[g+7]=f[y]>>>24}return h},u=function(f){var h=this,g=f.capacity,y=f.padding,b=(0,n.default)(),I=200,k=g/8,$=I-g/4,P=0,F=new Uint32Array(I/4),A=t.Buffer.allocUnsafe($);return this.absorb=function(B){for(var C=0;C<B.length;C++)A[P]=B[C],P+=1,P>=$&&(o(A,F),b(F),P=0);return h},this.squeeze=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C={buffer:B.buffer||t.Buffer.allocUnsafe(k),padding:B.padding||y,queue:t.Buffer.allocUnsafe(A.length),state:new Uint32Array(F.length)};A.copy(C.queue);for(var fe=0;fe<F.length;fe++)C.state[fe]=F[fe];C.queue.fill(0,P),C.queue[P]|=C.padding,C.queue[$-1]|=128,o(C.queue,C.state);for(var pe=0;pe<C.buffer.length;pe+=$)b(C.state),s(C.state,C.buffer.slice(pe,pe+$));return C.buffer},this.reset=function(){return A.fill(0),F.fill(0),P=0,h},this},c=u;e.default=c})(Ys);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SHAKE=e.SHA3Hash=e.SHA3=e.Keccak=void 0;var t=Vo,n=r(Ys);function r(h){return h&&h.__esModule?h:{default:h}}var o=function(g){var y=g.allowedSizes,b=g.defaultSize,I=g.padding;return function k(){var $=this,P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;if(!this||this.constructor!==k)return new k(P);if(y&&!y.includes(P))throw new Error("Unsupported hash length");var F=new n.default({capacity:P});return this.update=function(A){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"utf8";if(t.Buffer.isBuffer(A))return F.absorb(A),$;if(typeof A=="string")return $.update(t.Buffer.from(A,B));throw new TypeError("Not a string or buffer")},this.digest=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"binary",B=typeof A=="string"?{format:A}:A,C=F.squeeze({buffer:B.buffer,padding:B.padding||I});return B.format&&B.format!=="binary"?C.toString(B.format):C},this.reset=function(){return F.reset(),$},this}},s=o({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});e.Keccak=s;var u=o({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});e.SHA3=u;var c=o({allowedSizes:[128,256],defaultSize:256,padding:31});e.SHAKE=c;var p=s;e.SHA3Hash=p,u.SHA3Hash=p;var f=u;e.default=f})(vf);Xd();async function If(e,t){if(e==null||t==null)return[];const n=new qs(e);n.searchParams.append("code",t);const r=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(s=>s.json());if(Array.isArray(r))return r;const o=[];if(Array.isArray(r.authorizations))for(let s of r.authorizations)o.push({type:"authz",keyId:r.keyId,...s});return r.provider!=null&&o.push({type:"authn",id:"wallet-provider#authn",...r.provider}),o}function Af(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return[...e,...t]}function Cf(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:return{...ft,type:e.type,uid:e.id,endpoint:e.authn,id:e.pid,provider:{address:ue(e.addr),name:e.name,icon:e.icon}}}}function Tf(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:return{...ft,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...js,address:ue(e.addr),keyId:e.keyId},params:e.params,data:e.data}}}function kf(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:return{...ft,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...js,address:ue(e.addr),keyId:e.keyId},params:e.params,data:e.data}}}function ei(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:return{old:e,...ft,type:"frame",endpoint:e.endpoint,params:e.params||{},data:e.data||{}}}}function ti(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:return{...ft,type:"back-channel-rpc",endpoint:e.endpoint,method:e.method,params:e.params||{},data:e.data||{}}}}function $f(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:return null}}function Pf(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:throw new Error("Invalid user-signature service")}}function ni(e){if(e==null)return null;switch(e.method==null&&(e={...e,type:"local-view",method:"VIEW/IFRAME"}),e.f_vsn){case"1.0.0":return e;default:return{...ft,type:e.type||"local-view",method:e.method,endpoint:e.endpoint,data:e.data||{},params:e.params||{}}}}function Bf(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:throw new Error("FCL Normalizer Error: Invalid account-proof service")}}function Ff(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:throw new Error("Invalid authn-refresh service")}}const Nf={"back-channel-rpc":ti,"pre-authz":kf,authz:Tf,authn:Cf,frame:ei,"open-id":$f,"user-signature":Pf,"local-view":ni,"account-proof":Bf,"authn-refresh":Ff};function _f(e,t){try{var n=Nf[e.type](e,t);return n}catch(r){return console.error(`Unrecognized FCL Service Type [${e.type}]`,e,r),e}}function Of(e){return Dn([e.provider.address||e.provider.name||"UNSPECIFIED",e.id]).toString("hex")}function Df(e){return e.addr=e.addr?ue(e.addr):null,e.paddr=e.paddr?ue(e.paddr):null,e}function Lf(e,t){return t.find(n=>n.type===e)}async function ho(e){e=Df(e);var t=Af(e.services||[],await If(e.hks,e.code)).map(r=>_f(r,e));const n=Lf("authn",t);return{...cf,addr:ue(e.addr),cid:Of(n),loggedIn:!0,services:t,expiresAt:e.expires}}function Vt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(n=>n.type===t)}const Uf=async e=>{let{service:t,body:n,config:r,opts:o}=e;return wr().getStrategy(t.method)({service:t,body:n,config:r,opts:o})};async function ze(e){let{service:t,msg:n={},config:r={},opts:o={},platform:s}=e;n.data=t.data;const u={services:await go(/^service\./),app:await go(/^app\.detail\./),client:{...r.client,platform:s,fclVersion:Oe,fclLibrary:"https://github.com/onflow/fcl-js",hostname:window?.location?.hostname??null,network:await $t(o)}};try{const c=await Uf({service:t,body:n,config:u,opts:o});return c.status==="REDIRECT"?(v(t.type===c.data.type,"Cannot shift recursive service type in execService"),await ze({service:c.data,msg:n,config:u,opts:o})):c}catch(c){throw oe({title:`Error on execService ${t?.type}`,message:c,level:re.error}),c}}function $n(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:return{...df,addr:J(e.addr||e.address),signature:e.signature||e.sig,keyId:e.keyId}}}const Gf=e=>typeof e=="function",Re="CURRENT_USER",fn="CURRENT_USER/UPDATED",ri="SNAPSHOT",Pn="SET_CURRENT_USER",oi="DEL_CURRENT_USER",Bn=`{
  "f_type": "User",
  "f_vsn": "1.0.0",
  "addr":null,
  "cid":null,
  "loggedIn":null,
  "expiresAt":null,
  "services":[]
}`,Mf=async e=>{const t=JSON.parse(Bn),n=await e.get(Re);return n!=null&&t.f_vsn!==n.f_vsn?(e.removeItem(Re),t):n||t},qf={[yn]:async e=>{typeof window>"u"&&console.warn(`
        %cFCL Warning
        ============================
        "currentUser" is only available in the browser.
        For more info, please see the docs: https://docs.onflow.org/fcl/
        ============================
        `,"font-weight:bold;font-family:monospace;"),e.merge(JSON.parse(Bn));const t=await T.first(["fcl.storage","fcl.storage.default"]);if(t.can){const n=await Mf(t);jf(n)&&e.merge(n)}},[xt]:(e,t)=>{e.subscribe(t.from),e.send(t.from,fn,{...e.all()})},[St]:(e,t)=>{e.unsubscribe(t.from)},[ri]:async(e,t)=>{t.reply({...e.all()})},[Pn]:async(e,t,n)=>{e.merge(n);const r=await T.first(["fcl.storage","fcl.storage.default"]);r.can&&r.put(Re,e.all()),e.broadcast(fn,{...e.all()})},[oi]:async(e,t)=>{e.merge(JSON.parse(Bn));const n=await T.first(["fcl.storage","fcl.storage.default"]);n.can&&n.put(Re,e.all()),e.broadcast(fn,{...e.all()})}},pt=()=>Tt(qf,Re);function jf(e){return e.expiresAt==null||e.expiresAt===0||e.expiresAt>Date.now()}async function Hf(){let e=await T.get("fcl.accountProof.resolver");if(e==null)return;if(!Gf(e)){oe({title:"Account Proof Data Resolver must be a function",message:`Check fcl.accountProof.resolver configuration.
                Expected: fcl.accountProof.resolver: async () => { ... }
                Received: fcl.accountProof.resolver: ${typeof e}
                `,level:re.warn});return}const t=await e();if(t!=null)return v(typeof t.appIdentifier=="string","appIdentifier must be a string"),v(/^[0-9a-f]+$/i.test(t.nonce),"Nonce must be a hex string"),t}const zf=async e=>{let{discoveryAuthnInclude:t}=e;return{client:{discoveryAuthnInclude:t,clientServices:await bf(),supportedStrategies:wr().getStrategies()}}},Ct=e=>{let{platform:t}=e;return async function(){let{service:n,redir:r=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n&&!n?.provider?.is_installed&&n?.provider?.requires_install){window.location.href=n?.provider?.install_link;return}return new Promise(async(o,s)=>{pt();const u={redir:r},c=await bt(),p=await Sf(n),f=Vt(c.services,"authn-refresh");let h;if(c.loggedIn)if(f)try{const g=await ze({service:f,msg:h,opts:u,platform:t});ie(Re,Pn,await ho(g))}catch(g){oe({title:`${g.name} Could not refresh wallet authentication.`,message:g.message,level:re.error})}finally{return o(await bt())}else return o(c);try{h=await Hf()}catch(g){return oe({title:`${g.name} On Authentication: Could not resolve account proof data.`,message:g.message,level:re.error}),s(g)}try{const g=await ze({service:p,msg:h,config:await zf(p),opts:u,platform:t});ie(Re,Pn,await ho(g))}catch(g){oe({title:`${g} On Authentication`,message:g,level:re.error})}finally{o(await bt())}})}};function mo(){pt(),ie(Re,oi)}const Yf=e=>({f_type:"PreAuthzResponse",f_vsn:"1.0.0",proposer:(e||{}).proposer,payer:(e||{}).payer||[],authorization:(e||{}).authorization||[]}),Kf=e=>{let{platform:t}=e;return n=>{const r=Yf(n),o=[];r.proposer!=null&&o.push(["PROPOSER",r.proposer]);for(let u of r.payer||[])o.push(["PAYER",u]);for(let u of r.authorization||[])o.push(["AUTHORIZER",u]);var s=o.map(u=>{let[c,p]=u;return{tempId:[p.identity.address,p.identity.keyId].join("|"),addr:p.identity.address,keyId:p.identity.keyId,signingFunction(f){return ze({service:p,msg:f,platform:t})},role:{proposer:c==="PROPOSER",payer:c==="PAYER",authorizer:c==="AUTHORIZER"}}});return s}},yo=e=>{let{platform:t}=e;return async n=>(pt(),{...n,tempId:"CURRENT_USER",async resolve(r,o){const s=await Ct({platform:t})({redir:!0}),u=Vt(s.services,"authz"),c=Vt(s.services,"pre-authz");if(c)return Kf({platform:t})(await ze({service:c,msg:o,platform:t}));if(u){let p;return nf()&&u.method==="WC/RPC"&&(p=window.open("","_blank")),{...r,tempId:"CURRENT_USER",resolve:null,addr:J(u.identity.address),keyId:u.identity.keyId,sequenceNum:null,signature:null,async signingFunction(f){return $n(await ze({service:u,msg:f,opts:{includeOlderJsonRpcCall:!0,windowRef:p},platform:t}))}}}throw new Error("No Authz or PreAuthz Service configured for CURRENT_USER")}})};function wo(e){pt();const t="@EXIT",n=Tt(async r=>{for(r.send(Re,xt);;){const o=await r.receive();if(o.tag===t){r.send(Re,St);return}e(o.data)}});return()=>ie(n,t)}function bt(){return pt(),ie(Re,ri,null,{expectReply:!0,timeout:0})}const Eo=e=>{let{platform:t}=e;return async()=>{const{addr:n}=await Ct({platform:t})();return ys(ue(n),Ds)}},Wf=e=>(v(/^[0-9a-f]+$/i.test(e),"Message must be a hex string"),{message:e}),bo=e=>{let{platform:t}=e;return async n=>{pt();const r=await Ct({platform:t})({redir:!0}),o=Vt(r.services,"user-signature");v(o,"Current user must have authorized a signing service.");try{const s=await ze({service:o,msg:Wf(n),platform:t});return Array.isArray(s)?s.map(u=>$n(u)):[$n(s)]}catch(s){return s}}},Vf=e=>{let{platform:t}=e,n=()=>({authenticate:Ct({platform:t}),unauthenticate:mo,authorization:yo({platform:t}),signUserMessage:bo({platform:t}),subscribe:wo,snapshot:bt,resolveArgument:Eo({platform:t})});return n.authenticate=Ct({platform:t}),n.unauthenticate=mo,n.authorization=yo({platform:t}),n.signUserMessage=bo({platform:t}),n.subscribe=wo,n.snapshot=bt,n.resolveArgument=Eo({platform:t}),n},Nt="FCL_IFRAME",xf=`
  position:fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  height: 100%;
  width: 100vw;
  display:block;
  background:rgba(0,0,0,0.25);
  z-index: 2147483647;
  box-sizing: border-box;
  color-scheme: light;
`;function ai(e){v(!document.getElementById(Nt),"Attempt at triggering multiple Frames",{src:e});const t=document.createElement("iframe");t.src=e,t.id=Nt,t.allow="usb *; hid *",t.frameBorder="0",t.style.cssText=xf,document.body.append(t);const n=()=>{document.getElementById(Nt)&&document.getElementById(Nt).remove()};return[t.contentWindow,n]}const Jf="FCL_POP";let ve=null,So=null;function Xf(e,t,n,r,o){const s=n.top.outerHeight/2+n.top.screenY-o/2,u=n.top.outerWidth/2+n.top.screenX-r/2,c=n.open(e,t,`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${r}, height=${o}, top=${s}, left=${u}`);if(!c)throw new Error("Popup failed to open (was it blocked by a popup blocker?)");return c}function si(e){return ve==null||ve?.closed?ve=Xf(e,Jf,window,640,770):(So!==e&&ve.location.replace(e),ve.focus()),So=e,[ve,()=>{ve&&!ve.closed&&ve.close(),ve=null}]}let ye=null,vo=null;function ii(e){if(ye==null||ye?.closed){if(ye=window.open(e,"_blank"),!ye)throw new Error("Tab failed to open (was it blocked by the browser?)")}else vo!==e&&ye.location.replace(e),ye.focus();return vo=e,[ye,()=>{ye&&!ye.closed&&ye.close(),ye=null}]}const Zf=()=>typeof window>"u",Qf=()=>{try{return{can:!Zf(),get:async t=>JSON.parse(sessionStorage.getItem(t)),put:async(t,n)=>sessionStorage.setItem(t,JSON.stringify(n))}}catch{return null}},ep=()=>({"discovery.wallet.method.default":"IFRAME/RPC","fcl.storage.default":Qf()});function Pt(e){const t=new qs(e.endpoint);if(window?.location?.origin&&t.searchParams.append("l6n",window.location.origin),e.params!=null)for(let[n,r]of Object.entries(e.params||{}))t.searchParams.append(n,r);return t}function ui(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=t.method||"POST",r=n==="GET"?void 0:JSON.stringify(t.data||e.data||{});return fetch(Pt(e),{method:n,headers:{...e.headers||{},...t.headers||{},"Content-Type":"application/json"},body:r}).then(o=>o.json())}function De(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:return{...lf,status:e.status??"APPROVED",reason:e.reason??null,data:e.compositeSignature||e.data||{...e},updates:ti(e.authorizationUpdates),local:ei((e.local||[])[0])}}}const Ro={"HTTP/GET":"GET","HTTP/POST":"POST"},tp=e=>(v(Ro[e.method],"Invalid Service Method for type back-channel-rpc",{service:e}),Ro[e.method]);async function Fn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>!0;if(v(e,"Missing Polling Service",{service:e}),!t())throw new Error("Externally Halted");let r;try{if(typeof document<"u"&&document.visibilityState==="hidden")return await new Promise(o=>setTimeout(o,500)),Fn(e,t);r=await ui(e,{method:tp(e)}).then(De)}catch(o){throw o}switch(r.status){case"APPROVED":return r.data;case"DECLINED":throw new Error(`Declined: ${r.reason||"No reason supplied."}`);default:return await new Promise(o=>setTimeout(o,500)),Fn(r.updates,t)}}const Io=e=>async t=>{let{service:n,body:r,config:o,opts:s}=t;const u=await ui(n,{data:{fclVersion:Oe,service:{params:n.params,data:n.data,type:n.type},config:o,...r}}).then(De);if(u.status==="APPROVED")return u.data;if(u.status==="DECLINED")throw new Error(`Declined: ${u.reason||"No reason supplied."}`);if(u.status==="REDIRECT")return u;if(u.status==="PENDING"){var c=!0,p=!0;const[f,h]=await e(ni(u.local),{serviceEndpoint:Pt,onClose:()=>p=!1}),g=()=>{try{h(),p=!1}catch(b){console.error("Frame Close Error",b)}},y=()=>{const b=c;return c=p,b};return Fn(u.updates,y).then(b=>(g(),b)).catch(b=>{throw console.error(b),g(),b})}else throw console.error("Auto Decline: Invalid Response",{service:n,resp:u}),new Error("Auto Decline: Invalid Response")},_t="FCL:VIEW:CLOSE",pn="FCL:VIEW:READY",gn="FCL:VIEW:RESPONSE",x=e=>typeof e=="string"&&e.toLowerCase(),np=new Set(["monetizationstart","monetizationpending","monetizationprogress","monetizationstop"]),Me=(e,t)=>console.warn("DEPRECATION NOTICE",`Received ${e}, please use ${t} for this and future versions of FCL`),en=e=>{let{close:t,send:n,onReady:r,onResponse:o,onMessage:s}=e;return u=>{try{if(typeof u.data!="object"||np.has(u.data.type))return;x(u.data.type)===x(_t)&&t(),x(u.data.type)===x(pn)&&r(u,{send:n,close:t}),x(u.data.type)===x(gn)&&o(u,{send:n,close:t}),s(u,{send:n,close:t}),x(u.data.type)===x("FCL:FRAME:READY")&&(Me(u.data.type,pn),r(u,{send:n,close:t})),x(u.data.type)===x("FCL:FRAME:RESPONSE")&&(Me(u.data.type,gn),o(u,{send:n,close:t})),x(u.data.type)===x("FCL:FRAME:CLOSE")&&(Me(u.data.type,_t),t()),x(u.data.type)===x("FCL::CHALLENGE::RESPONSE")&&(Me(u.data.type,gn),o(u,{send:n,close:t})),x(u.data.type)===x("FCL::AUTHZ_READY")&&(Me(u.data.type,pn),r(u,{send:n,close:t})),x(u.data.type)===x("FCL::CHALLENGE::CANCEL")&&(Me(u.data.type,_t),t()),x(u.data.type)===x("FCL::CANCEL")&&(Me(u.data.type,_t),t())}catch(c){console.error("Frame Callback Error",c),t()}}},Qe=()=>{};function rp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Qe,close:Qe};const n=t.onClose||Qe,r=t.onMessage||Qe,o=t.onReady||Qe,s=t.onResponse||Qe,u=en({close:f,send:h,onReady:o,onResponse:s,onMessage:r});window.addEventListener("message",u);const[c,p]=ai(Pt(e));return{send:h,close:f};function f(){try{window.removeEventListener("message",u),p(),n()}catch(g){console.error("Frame Close Error",g)}}function h(g){try{c.postMessage(JSON.parse(JSON.stringify(g||{})),"*")}catch(y){console.error("Frame Send Error",g,y)}}}function op(e){let{service:t,body:n,config:r,opts:o}=e;return new Promise((s,u)=>{const c=mr(),p=o.includeOlderJsonRpcCall;rp(t,{async onReady(f,h){let{send:g}=h;try{g({type:"FCL:VIEW:READY:RESPONSE",fclVersion:Oe,body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),g({fclVersion:Oe,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),p&&g({jsonrpc:"2.0",id:c,method:"fcl:sign",params:[n,t.params],deprecated:{message:"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}})}catch(y){throw y}},onResponse(f,h){let{close:g}=h;try{if(typeof f.data!="object")return;const y=De(f.data);switch(y.status){case"APPROVED":s(y.data),g();break;case"DECLINED":u(`Declined: ${y.reason||"No reason supplied"}`),g();break;case"REDIRECT":s(y),g();break;default:u("Declined: No reason supplied"),g();break}}catch(y){throw console.error("execIframeRPC onResponse error",y),y}},onMessage(f,h){let{close:g}=h;try{if(typeof f.data!="object"||f.data.jsonrpc!=="2.0"||f.data.id!==c)return;const y=De(f.data.result);switch(y.status){case"APPROVED":s(y.data),g();break;case"DECLINED":u(`Declined: ${y.reason||"No reason supplied"}`),g();break;case"REDIRECT":s(y),g();break;default:u("Declined: No reason supplied"),g();break}}catch(y){throw console.error("execIframeRPC onMessage error",y),y}},onClose(){u("Declined: Externally Halted")}})})}const et=()=>{};function ap(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:et,close:et};const n=t.onClose||et,r=t.onMessage||et,o=t.onReady||et,s=t.onResponse||et,u=en({close:h,send:g,onReady:o,onResponse:s,onMessage:r});window.addEventListener("message",u);const[c,p]=si(Pt(e)),f=setInterval(function(){c&&c.closed&&h()},500);return{send:g,close:h};function h(){try{window.removeEventListener("message",u),clearInterval(f),p(),n()}catch(y){console.error("Popup Close Error",y)}}function g(y){try{c.postMessage(JSON.parse(JSON.stringify(y||{})),"*")}catch(b){console.error("Popup Send Error",y,b)}}}function sp(e){let{service:t,body:n,config:r,opts:o}=e;return new Promise((s,u)=>{const c=mr(),{redir:p,includeOlderJsonRpcCall:f}=o;ap(t,{async onReady(h,g){let{send:y}=g;try{y({fclVersion:Oe,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),y({fclVersion:Oe,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),f&&y({jsonrpc:"2.0",id:c,method:"fcl:sign",params:[n,t.params]})}catch(b){throw b}},onResponse(h,g){let{close:y}=g;try{if(typeof h.data!="object")return;const b=De(h.data);switch(b.status){case"APPROVED":s(b.data),!p&&y();break;case"DECLINED":u(`Declined: ${b.reason||"No reason supplied"}`),y();break;case"REDIRECT":s(b),y();break;default:u("Declined: No reason supplied"),y();break}}catch(b){throw console.error("execPopRPC onResponse error",b),b}},onMessage(h,g){let{close:y}=g;try{if(typeof h.data!="object"||h.data.jsonrpc!=="2.0"||h.data.id!==c)return;const b=De(h.data.result);switch(b.status){case"APPROVED":s(b.data),!p&&y();break;case"DECLINED":u(`Declined: ${b.reason||"No reason supplied"}`),y();break;case"REDIRECT":s(b),y();break;default:u("Declined: No reason supplied"),y();break}}catch(b){throw console.error("execPopRPC onMessage error",b),b}},onClose(){u("Declined: Externally Halted")}})})}const tt=()=>{};function ip(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:tt,close:tt};const n=t.onClose||tt,r=t.onMessage||tt,o=t.onReady||tt,s=t.onResponse||tt,u=en({close:h,send:g,onReady:o,onResponse:s,onMessage:r});window.addEventListener("message",u);const[c,p]=ii(Pt(e)),f=setInterval(function(){c&&c.closed&&h()},500);return{send:g,close:h};function h(){try{window.removeEventListener("message",u),clearInterval(f),p(),n()}catch(y){console.error("Tab Close Error",y)}}function g(y){try{c.postMessage(JSON.parse(JSON.stringify(y||{})),"*")}catch(b){console.error("Tab Send Error",y,b)}}}function up(e){let{service:t,body:n,config:r,opts:o}=e;return new Promise((s,u)=>{const c=mr(),{redir:p,includeOlderJsonRpcCall:f}=o;ip(t,{async onReady(h,g){let{send:y}=g;try{y({fclVersion:Oe,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),y({fclVersion:Oe,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),f&&y({jsonrpc:"2.0",id:c,method:"fcl:sign",params:[n,t.params]})}catch(b){throw b}},onResponse(h,g){let{close:y}=g;try{if(typeof h.data!="object")return;const b=De(h.data);switch(b.status){case"APPROVED":s(b.data),!p&&y();break;case"DECLINED":u(`Declined: ${b.reason||"No reason supplied"}`),y();break;case"REDIRECT":s(b),y();break;default:u("Declined: No reason supplied"),y();break}}catch(b){throw console.error("execPopRPC onResponse error",b),b}},onMessage(h,g){let{close:y}=g;try{if(typeof h.data!="object"||h.data.jsonrpc!=="2.0"||h.data.id!==c)return;const b=De(h.data.result);switch(b.status){case"APPROVED":s(b.data),!p&&y();break;case"DECLINED":u(`Declined: ${b.reason||"No reason supplied"}`),y();break;case"REDIRECT":s(b),y();break;default:u("Declined: No reason supplied"),y();break}}catch(b){throw console.error("execPopRPC onMessage error",b),b}},onClose(){u("Declined: Externally Halted")}})})}const nt=()=>{};function cp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:nt,close:nt};const n=t.onClose||nt,r=t.onMessage||nt,o=t.onReady||nt,s=t.onResponse||nt,u=en({close:c,send:p,onReady:o,onResponse:s,onMessage:r});return window.addEventListener("message",u),p({service:e}),{send:p,close:c};function c(){try{window.removeEventListener("message",u),n()}catch(f){console.error("Ext Close Error",f)}}function p(f){try{window&&window.postMessage(JSON.parse(JSON.stringify(f||{})),"*")}catch(h){console.error("Ext Send Error",f,h)}}}function lp(e){let{service:t,body:n,config:r,opts:o}=e;return new Promise((s,u)=>{cp(t,{async onReady(c,p){let{send:f}=p;try{f({fclVersion:Oe,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r})}catch(h){throw h}},onResponse(c,p){let{close:f}=p;try{if(typeof c.data!="object")return;const h=De(c.data);switch(h.status){case"APPROVED":s(h.data),f();break;case"DECLINED":u(`Declined: ${h.reason||"No reason supplied"}`),f();break;case"REDIRECT":s(h),f();break;default:u("Declined: No reason supplied"),f();break}}catch(h){throw console.error("execExtRPC onResponse error",h),h}},onClose(){u("Declined: Externally Halted")}})})}const Ao=()=>{throw new Error("Strategy util has not been implemented on this platform")},dp={"VIEW/IFRAME":ai,"VIEW/POP":si,"VIEW/TAB":ii,"VIEW/MOBILE_BROWSER":Ao,"VIEW/DEEPLINK":Ao};async function Co(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{serviceEndpoint:()=>{}};const{serviceEndpoint:n}=t;try{return dp[e.method](n(e),t)}catch(r){throw console.error("execLocal({service, opts = {}})",r,{service:e,opts:t}),r}}const fp={[he["HTTP/RPC"]]:Io(Co),[he["HTTP/POST"]]:Io(Co),[he["IFRAME/RPC"]]:op,[he["POP/RPC"]]:sp,[he["TAB/RPC"]]:up,[he["EXT/RPC"]]:lp},br=Vf({platform:"web"}),pp=()=>br().unauthenticate(),gp=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return br().authenticate(e)};T(ep());zs({coreStrategies:fp});const $p="CryptoCardShop",To={title:"CryptoCard Shop",description:"LCD Slabs for your Digital Collectibles",url:"soon",author:"Noah Naizir",icon:"/shop-logo.png"},hp=globalThis.__sveltekit_t2kxpt.env,mp=async()=>({appIdentifier:"CryptoCard Shop",nonce:"7f190deedcd3b0538b7cd0ebc1994ed40d9db16cc1a6fcc3e7a994240c14d86d"}),hn=hp.PUBLIC_FLOW_NETWORK,ko={emulator:{accessNode:"http://127.0.0.1:8888",discoveryWallet:"http://localhost:8701/fcl/authn"},testnet:{accessNode:"https://rest-testnet.onflow.org",discoveryWallet:"https://fcl-discovery.onflow.org/testnet/authn"},mainnet:{accessNode:"https://rest-mainnet.onflow.org",discoveryWallet:"https://fcl-discovery.onflow.org/authn"}};T().put("app.detail.title",To.title).put("app.detail.icon",To.icon).put("fcl.accountProof.resolver",mp).put("flow.network",hn).put("accessNode.api",ko[hn].accessNode).put("discovery.wallet.method","POP/RPC").put("discovery.wallet",ko[hn].discoveryWallet).put("discovery.wallet","https://accounts.meetdapper.com/fcl/authn-restricted");const yp=$o({loggedIn:!1,addr:null}),wp=$o([]),Ep=()=>typeof window<"u"&&"document"in window&&"location"in window,mn=e=>({...e.location,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}),bp=e=>{const t=[];let n=mn(e);return{get location(){return n},listen(r){t.push(r);const o=()=>{n=mn(e),r({location:n,action:"POP"})};return e.addEventListener("popstate",o),()=>{e.removeEventListener("popstate",o);const s=t.indexOf(r);t.splice(s,1)}},navigate(r,{state:o,replace:s=!1,preserveScroll:u=!1}={}){o={...o,key:Date.now()+""};try{s?e.history.replaceState(o,"",r):e.history.pushState(o,"",r)}catch{e.location[s?"replace":"assign"](r)}n=mn(e),t.forEach(c=>c({location:n,action:"PUSH",preserveScroll:u})),document.activeElement.blur()}}},Sp=(e="/")=>{let t=0;const n=[{pathname:e,search:""}],r=[];return{get location(){return n[t]},addEventListener(o,s){},removeEventListener(o,s){},history:{get entries(){return n},get index(){return t},get state(){return r[t]},pushState(o,s,u){const[c,p=""]=u.split("?");t++,n.push({pathname:c,search:p}),r.push(o)},replaceState(o,s,u){const[c,p=""]=u.split("?");n[t]={pathname:c,search:p},r[t]=o}}}},vp=bp(Ep()?window:Sp()),{navigate:Rp}=vp,Ip=()=>`import TopShot from 0x0b2a3299cc857e29
    import MetadataViews from 0x1d7e57aa55817448
        
    pub fun main(account: Address): [UInt64] {
    
        let acct = getAccount(account)
    
        let collectionRef = acct.getCapability(/public/MomentCollection)
                                .borrow<&{TopShot.MomentCollectionPublic}>()!
    
        return collectionRef.getIDs()
    }`,Pp=()=>pp(),Bp=async()=>{await gp(),Rp("/collection"),location.reload()},Ap=async()=>{try{return await Ms({cadence:Ip(),args:(t,n)=>[t("0x6278d56bbbcdd338",n.Address)]})}catch(e){console.log(e)}};{br.subscribe(yp.set);const e=await Ap();wp.set(e),console.log("browser update")}export{Pp as a,$p as d,Ap as g,Bp as l,wp as m,yp as u};
